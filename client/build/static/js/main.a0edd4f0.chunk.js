(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],[,,,function(e,t,a){"use strict";a.d(t,"c",(function(){return n})),a.d(t,"b",(function(){return c})),a.d(t,"a",(function(){return r}));var n={AUTH:"AUTH",ALERT:"ALERT",THEME:"THEME",STATUS:"STATUS",MODAL:"MODAL",SOCKET:"SOCKET",ONLINE:"ONLINE",OFFLINE:"OFFLINE",CALL:"CALL",PEER:"PEER",GROUP:"GROUP"},c=function(e,t,a){return e.map((function(e){return e._id===t?a:e}))},r=function(e,t){return e.filter((function(e){return e._id!==t}))}},,,,,function(e,t,a){"use strict";a.d(t,"b",(function(){return i})),a.d(t,"d",(function(){return u})),a.d(t,"c",(function(){return l})),a.d(t,"a",(function(){return d}));var n=a(4),c=a.n(n),r=a(7),s=a(45),o=a.n(s),i=function(){var e=Object(r.a)(c.a.mark((function e(t,a){var n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.a.get("/api/".concat(t),{headers:{Authorization:a}});case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),u=function(){var e=Object(r.a)(c.a.mark((function e(t,a,n){var r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.a.post("/api/".concat(t),a,{headers:{Authorization:n}});case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),l=function(){var e=Object(r.a)(c.a.mark((function e(t,a,n){var r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.a.patch("/api/".concat(t),a,{headers:{Authorization:n}});case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),d=function(){var e=Object(r.a)(c.a.mark((function e(t,a){var n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.a.delete("/api/".concat(t),{headers:{Authorization:a}});case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()},,function(e,t,a){"use strict";a.d(t,"a",(function(){return j})),a.d(t,"b",(function(){return b})),a.d(t,"e",(function(){return p})),a.d(t,"j",(function(){return f})),a.d(t,"f",(function(){return O})),a.d(t,"h",(function(){return m})),a.d(t,"d",(function(){return h})),a.d(t,"c",(function(){return x})),a.d(t,"g",(function(){return v})),a.d(t,"i",(function(){return g}));var n=a(9),c=a(4),r=a.n(c),s=a(2),o=a(7),i=a(3),u=a(23),l=a(8),d=a(13),j={CREATE_POST:"CREATE_POST",LOADING_POST:"LOADING_POST",GET_POSTS:"GET_POSTS",UPDATE_POST:"UPDATE_POST",GET_POST:"GET_POST",DELETE_POST:"DELETE_POST"},b=function(e){var t=e.content,a=e.images,n=e.auth,c=e.socket;return function(){var e=Object(o.a)(r.a.mark((function e(o){var b,p,f;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(b=[],e.prev=1,o({type:i.c.ALERT,payload:{loading:!0}}),!(a.length>0)){e.next=7;break}return e.next=6,Object(u.c)(a);case 6:b=e.sent;case 7:return e.next=9,Object(l.d)("posts",{content:t,images:b},n.token);case 9:p=e.sent,o({type:j.CREATE_POST,payload:Object(s.a)(Object(s.a)({},p.data.newPost),{},{user:n.user})}),o({type:i.c.ALERT,payload:{loading:!1}}),f={id:p.data.newPost._id,text:"added a new post.",recipients:p.data.newPost.user.followers,url:"/post/".concat(p.data.newPost._id),content:t,image:b[0].url},o(Object(d.b)({msg:f,auth:n,socket:c})),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(1),o({type:i.c.ALERT,payload:{error:e.t0.response.data.msg}});case 19:case"end":return e.stop()}}),e,null,[[1,16]])})));return function(t){return e.apply(this,arguments)}}()},p=function(e){return function(){var t=Object(o.a)(r.a.mark((function t(a){var n;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a({type:j.LOADING_POST,payload:!0}),t.next=4,Object(l.b)("posts",e);case 4:n=t.sent,console.log("get res.data",n.data),a({type:j.GET_POSTS,payload:Object(s.a)(Object(s.a)({},n.data),{},{page:2})}),a({type:j.LOADING_POST,payload:!1}),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(0),a({type:i.c.ALERT,payload:{error:t.t0.response.data.msg}});case 13:case"end":return t.stop()}}),t,null,[[0,10]])})));return function(e){return t.apply(this,arguments)}}()},f=function(e){var t=e.content,a=e.images,c=e.auth,s=e.status;return function(){var e=Object(o.a)(r.a.mark((function e(o){var d,b,p,f;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(d=[],b=a.filter((function(e){return!e.url})),p=a.filter((function(e){return e.url})),s.content!==t||0!==b.length||p.length!==s.images.length){e.next=5;break}return e.abrupt("return");case 5:if(e.prev=5,o({type:i.c.ALERT,payload:{loading:!0}}),!(b.length>0)){e.next=11;break}return e.next=10,Object(u.c)(b);case 10:d=e.sent;case 11:return e.next=13,Object(l.c)("post/".concat(s._id),{content:t,images:[].concat(Object(n.a)(p),Object(n.a)(d))},c.token);case 13:f=e.sent,o({type:j.UPDATE_POST,payload:f.data.newPost}),o({type:i.c.ALERT,payload:{success:f.data.msg}}),e.next=21;break;case 18:e.prev=18,e.t0=e.catch(5),o({type:i.c.ALERT,payload:{error:e.t0.response.data.msg}});case 21:case"end":return e.stop()}}),e,null,[[5,18]])})));return function(t){return e.apply(this,arguments)}}()},O=function(e){var t=e.post,a=e.auth,c=e.socket;return function(){var e=Object(o.a)(r.a.mark((function e(o){var u,b;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u=Object(s.a)(Object(s.a)({},t),{},{likes:[].concat(Object(n.a)(t.likes),[a.user])}),o({type:j.UPDATE_POST,payload:u}),c.emit("likePost",u),e.prev=3,e.next=6,Object(l.c)("post/".concat(t._id,"/like"),null,a.token);case 6:b={id:a.user._id,text:"like your post.",recipients:[t.user._id],url:"/post/".concat(t._id),content:t.content,image:t.images[0].url},o(Object(d.b)({msg:b,auth:a,socket:c})),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(3),o({type:i.c.ALERT,payload:{error:e.t0.response.data.msg}});case 13:case"end":return e.stop()}}),e,null,[[3,10]])})));return function(t){return e.apply(this,arguments)}}()},m=function(e){var t=e.post,a=e.auth,n=e.socket;return function(){var e=Object(o.a)(r.a.mark((function e(c){var o,u;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=Object(s.a)(Object(s.a)({},t),{},{likes:t.likes.filter((function(e){return e._id!==a.user._id}))}),c({type:j.UPDATE_POST,payload:o}),n.emit("unLikePost",o),e.prev=3,e.next=6,Object(l.c)("post/".concat(t._id,"/unlike"),null,a.token);case 6:u={id:a.user._id,text:"like your post.",recipients:[t.user._id],url:"/post/".concat(t._id)},c(Object(d.f)({msg:u,auth:a,socket:n})),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(3),c({type:i.c.ALERT,payload:{error:e.t0.response.data.msg}});case 13:case"end":return e.stop()}}),e,null,[[3,10]])})));return function(t){return e.apply(this,arguments)}}()},h=function(e){var t=e.detailPost,a=e.id,n=e.auth;return function(){var e=Object(o.a)(r.a.mark((function e(c){var s;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.every((function(e){return e._id!==a}))){e.next=11;break}return e.prev=1,e.next=4,Object(l.b)("post/".concat(a),n.token);case 4:s=e.sent,c({type:j.GET_POST,payload:s.data.post}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),c({type:i.c.ALERT,payload:{error:e.t0.response.data.msg}});case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}()},x=function(e){var t=e.post,a=e.auth,n=e.socket;return function(){var e=Object(o.a)(r.a.mark((function e(c){var s,o;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c({type:j.DELETE_POST,payload:t}),e.prev=1,e.next=4,Object(l.a)("post/".concat(t._id),a.token);case 4:return s=e.sent,console.log("post.images",t.images),e.next=8,Object(u.b)(t.images);case 8:o={id:t._id,text:"added a new post.",recipients:s.data.newPost.user.followers,url:"/post/".concat(t._id)},c(Object(d.f)({msg:o,auth:a,socket:n})),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(1),c({type:i.c.ALERT,payload:{error:e.t0.response.data.msg}});case 15:case"end":return e.stop()}}),e,null,[[1,12]])})));return function(t){return e.apply(this,arguments)}}()},v=function(e){var t=e.post,a=e.auth;return function(){var e=Object(o.a)(r.a.mark((function e(c){var o;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=Object(s.a)(Object(s.a)({},a.user),{},{saved:[].concat(Object(n.a)(a.user.saved),[t._id])}),c({type:i.c.AUTH,payload:Object(s.a)(Object(s.a)({},a),{},{user:o})}),e.prev=2,e.next=5,Object(l.c)("savePost/".concat(t._id),null,a.token);case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),c({type:i.c.ALERT,payload:{error:e.t0.response.data.msg}});case 10:case"end":return e.stop()}}),e,null,[[2,7]])})));return function(t){return e.apply(this,arguments)}}()},g=function(e){var t=e.post,a=e.auth;return function(){var e=Object(o.a)(r.a.mark((function e(n){var c;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=Object(s.a)(Object(s.a)({},a.user),{},{saved:a.user.saved.filter((function(e){return e!==t._id}))}),n({type:i.c.AUTH,payload:Object(s.a)(Object(s.a)({},a),{},{user:c})}),e.prev=2,e.next=5,Object(l.c)("unSavePost/".concat(t._id),null,a.token);case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),n({type:i.c.ALERT,payload:{error:e.t0.response.data.msg}});case 10:case"end":return e.stop()}}),e,null,[[2,7]])})));return function(t){return e.apply(this,arguments)}}()}},,function(e,t,a){"use strict";a.d(t,"a",(function(){return u})),a.d(t,"b",(function(){return l})),a.d(t,"e",(function(){return d})),a.d(t,"f",(function(){return j})),a.d(t,"g",(function(){return b})),a.d(t,"d",(function(){return p})),a.d(t,"c",(function(){return f}));var n=a(4),c=a.n(n),r=a(2),s=a(7),o=a(3),i=a(8),u={ADD_USER:"ADD_USER",ADD_MESSAGE:"ADD_MESSAGE",GET_CONVERSATIONS:"GET_CONVERSATIONS",GET_MESSAGES:"GET_MESSAGES",UPDATE_MESSAGES:"UPDATE_MESSAGES",DELETE_MESSAGES:"DELETE_MESSAGES",DELETE_CONVERSATION:"DELETE_CONVERSATION",CHECK_ONLINE_OFFLINE:"CHECK_ONLINE_OFFLINE"},l=function(e){var t=e.msg,a=e.auth,n=e.socket;return function(){var e=Object(s.a)(c.a.mark((function e(s){var l,d,j,b,p;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s({type:u.ADD_MESSAGE,payload:t}),l=a.user,d=l._id,j=l.avatar,b=l.fullname,p=l.username,n.emit("addMessage",Object(r.a)(Object(r.a)({},t),{},{user:{_id:d,avatar:j,fullname:b,username:p}})),e.prev=3,e.next=6,Object(i.d)("message",t,a.token);case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(3),s({type:o.c.ALERT,payload:{error:e.t0.response.data.msg}});case 11:case"end":return e.stop()}}),e,null,[[3,8]])})));return function(t){return e.apply(this,arguments)}}()},d=function(e){var t=e.auth,a=e.page,n=void 0===a?1:a;return function(){var e=Object(s.a)(c.a.mark((function e(a){var s,l;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(i.b)("conversations?limit=".concat(9*n),t.token);case 3:s=e.sent,l=[],s.data.conversations.forEach((function(e){e.recipients.forEach((function(a){a._id!==t.user._id&&l.push(Object(r.a)(Object(r.a)({},a),{},{text:e.text,media:e.media,call:e.call}))}))})),a({type:u.GET_CONVERSATIONS,payload:{newArr:l,result:s.data.result}}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),a({type:o.c.ALERT,payload:{error:e.t0.response.data.msg}});case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}()},j=function(e){var t=e.auth,a=e.id,n=e.page,l=void 0===n?1:n;return function(){var e=Object(s.a)(c.a.mark((function e(n){var s,d;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(i.b)("message/".concat(a,"?limit=").concat(9*l),t.token);case 3:s=e.sent,d=Object(r.a)(Object(r.a)({},s.data),{},{messages:s.data.messages.reverse()}),n({type:u.GET_MESSAGES,payload:Object(r.a)(Object(r.a)({},d),{},{_id:a,page:l})}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),n({type:o.c.ALERT,payload:{error:e.t0.response.data.msg}});case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}()},b=function(e){var t=e.auth,a=e.id,n=e.page,l=void 0===n?1:n;return function(){var e=Object(s.a)(c.a.mark((function e(n){var s,d;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(i.b)("message/".concat(a,"?limit=").concat(9*l),t.token);case 3:s=e.sent,d=Object(r.a)(Object(r.a)({},s.data),{},{messages:s.data.messages.reverse()}),n({type:u.UPDATE_MESSAGES,payload:Object(r.a)(Object(r.a)({},d),{},{_id:a,page:l})}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),n({type:o.c.ALERT,payload:{error:e.t0.response.data.msg}});case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}()},p=function(e){var t=e.msg,a=e.data,n=e.auth;return function(){var e=Object(s.a)(c.a.mark((function e(r){var s;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=Object(o.a)(a,t._id),r({type:u.DELETE_MESSAGES,payload:{newData:s,_id:t.recipient}}),e.prev=2,e.next=5,Object(i.a)("message/".concat(t._id),n.token);case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),r({type:o.c.ALERT,payload:{error:e.t0.response.data.msg}});case 10:case"end":return e.stop()}}),e,null,[[2,7]])})));return function(t){return e.apply(this,arguments)}}()},f=function(e){var t=e.auth,a=e.id;return function(){var e=Object(s.a)(c.a.mark((function e(n){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n({type:u.DELETE_CONVERSATION,payload:a}),e.prev=1,e.next=4,Object(i.a)("conversation/".concat(a),t.token);case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),n({type:o.c.ALERT,payload:{error:e.t0.response.data.msg}});case 9:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t){return e.apply(this,arguments)}}()}},function(e,t,a){"use strict";a.d(t,"a",(function(){return u})),a.d(t,"b",(function(){return l})),a.d(t,"f",(function(){return d})),a.d(t,"d",(function(){return j})),a.d(t,"e",(function(){return b})),a.d(t,"c",(function(){return p}));var n=a(4),c=a.n(n),r=a(2),s=a(7),o=a(3),i=a(8),u={GET_NOTIFIES:"GET_NOTIFIES",CREATE_NOTIFY:"CREATE_NOTIFY",REMOVE_NOTIFY:"REMOVE_NOTIFY",UPDATE_NOTIFY:"UPDATE_NOTIFY",UPDATE_SOUND:"UPDATE_SOUND",DELETE_ALL_NOTIFIES:"DELETE_ALL_NOTIFIES"},l=function(e){var t=e.msg,a=e.auth,n=e.socket;return function(){var e=Object(s.a)(c.a.mark((function e(s){var u;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(i.d)("notify",t,a.token);case 3:u=e.sent,n.emit("createNotify",Object(r.a)(Object(r.a)({},u.data.notify),{},{user:{username:a.user.username,avatar:a.user.avatar}})),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),s({type:o.c.ALERT,payload:{error:e.t0.response.data.msg}});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()},d=function(e){var t=e.msg,a=e.auth,n=e.socket;return function(){var e=Object(s.a)(c.a.mark((function e(r){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(i.a)("notify/".concat(t.id,"?url=").concat(t.url),a.token);case 3:n.emit("removeNotify",t),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),r({type:o.c.ALERT,payload:{error:e.t0.response.data.msg}});case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}()},j=function(e){return function(){var t=Object(s.a)(c.a.mark((function t(a){var n;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(i.b)("notifies",e);case 3:n=t.sent,a({type:u.GET_NOTIFIES,payload:n.data.notifies}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),a({type:o.c.ALERT,payload:{error:t.t0.response.data.msg}});case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()},b=function(e){var t=e.msg,a=e.auth;return function(){var e=Object(s.a)(c.a.mark((function e(n){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n({type:u.UPDATE_NOTIFY,payload:Object(r.a)(Object(r.a)({},t),{},{isRead:!0})}),e.prev=1,e.next=4,Object(i.c)("/isReadNotify/".concat(t._id),null,a.token);case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),n({type:o.c.ALERT,payload:{error:e.t0.response.data.msg}});case 9:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t){return e.apply(this,arguments)}}()},p=function(e){return function(){var t=Object(s.a)(c.a.mark((function t(a){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a({type:u.DELETE_ALL_NOTIFIES,payload:[]}),t.prev=1,t.next=4,Object(i.a)("deleteAllNotify",e);case 4:t.next=9;break;case 6:t.prev=6,t.t0=t.catch(1),a({type:o.c.ALERT,payload:{error:t.t0.response.data.msg}});case 9:case"end":return t.stop()}}),t,null,[[1,6]])})));return function(e){return t.apply(this,arguments)}}()}},,,function(e,t,a){"use strict";t.a=a.p+"static/media/loading.10625dac.gif"},function(e,t,a){"use strict";var n=a(0),c=(a(1),a(5));t.a=function(e){var t=e.src,a=e.size,r=Object(c.c)((function(e){return e})).theme;return Object(n.jsx)("img",{src:"/public/images/".concat(t),alt:"avatar",className:a,style:{filter:"".concat(r?"invert(1)":"invert(0)")}})}},function(e,t,a){"use strict";a.d(t,"a",(function(){return l})),a.d(t,"d",(function(){return d})),a.d(t,"b",(function(){return j})),a.d(t,"c",(function(){return b})),a.d(t,"f",(function(){return p})),a.d(t,"g",(function(){return f})),a.d(t,"h",(function(){return O})),a.d(t,"e",(function(){return m}));var n=a(4),c=a.n(n),r=a(2),s=a(7),o=a(3),i=a(8),u=a(23),l={ADD_GROUP:"ADD_GROUP",ADD_GROUPMES:"ADD_GROUPMES",GET_GROUPS:"GET_GROUPS",GET_GROUPMESSAGES:"GET_GROUPMESSAGES",UPDATE_GROUPMESSAGES:"UPDATE_GROUPMESSAGES",DELETE_GROUPMESSAGES:"DELETE_GROUPMESSAGES"},d=function(e){var t=e.groupData,a=e.avatar,n=e.auth;return function(){var e=Object(s.a)(c.a.mark((function e(s){var d,j;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,s({type:o.c.ALERT,payload:{loading:!0}}),!a){e.next=6;break}return e.next=5,Object(u.c)([a]);case 5:d=e.sent;case 6:return e.next=8,Object(i.d)("group",Object(r.a)(Object(r.a)({},t),{},{avatar:a?d[0].url:n.user.avatar}),n.token);case 8:j=e.sent,s({type:l.ADD_GROUP,payload:{message:j.data.msg}}),s({type:o.c.ALERT,payload:{loading:!1}}),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),s({type:o.c.ALERT,payload:{error:e.t0.response.data.msg}});case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t){return e.apply(this,arguments)}}()},j=function(e){var t=e.selectedgroup,a=e.groupmessage;return function(e){console.log(t,a),a.groups.every((function(e){return e._id!==t._id}))&&e({type:l.ADD_GROUP,payload:Object(r.a)(Object(r.a)({},t),{},{text:"",media:[]})})}},b=function(e){var t=e.msg,a=e.auth,n=e.socket,u=e.id;return function(){var e=Object(s.a)(c.a.mark((function e(s){var d,j,b,p,f,O;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("addGroupmes",t),s({type:l.ADD_GROUPMES,payload:t}),d=a.user,j=d._id,b=d.avatar,p=d.fullname,f=d.username,O={content:Object(r.a)(Object(r.a)({},t),{},{sender:{_id:j,avatar:b,fullname:p,username:f}}),to:u,sender:{_id:j,avatar:b,fullname:p,username:f},chatName:u,isChannel:!0},n.emit("send message",O),e.prev=5,e.next=8,Object(i.d)("groupmes",t,a.token);case 8:e.sent,e.next=14;break;case 11:e.prev=11,e.t0=e.catch(5),s({type:o.c.ALERT,payload:{error:e.t0.response.data.msg}});case 14:case"end":return e.stop()}}),e,null,[[5,11]])})));return function(t){return e.apply(this,arguments)}}()},p=function(e){var t=e.auth,a=e.page,n=void 0===a?1:a;return function(){var e=Object(s.a)(c.a.mark((function e(a){var s,u;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(i.b)("groupconversations?limit=".concat(9*n),t.token);case 3:s=e.sent,console.log(s),u=[],s.data.groups.forEach((function(e){u.push(Object(r.a)(Object(r.a)({},e),{},{text:e.text,media:e.media}))})),console.log(u),a({type:l.GET_GROUPS,payload:{newArr:u,result:s.data.result}}),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),a({type:o.c.ALERT,payload:{error:e.t0.response.data.msg}});case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t){return e.apply(this,arguments)}}()},f=function(e){var t=e.auth,a=e.id,n=e.page,u=void 0===n?1:n;return function(){var e=Object(s.a)(c.a.mark((function e(n){var s,d;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(i.b)("groupmessage/".concat(a,"?limit=").concat(9*u),t.token);case 3:s=e.sent,d=Object(r.a)(Object(r.a)({},s.data),{},{groupmessages:s.data.groupmessages.reverse()}),n({type:l.GET_GROUPMESSAGES,payload:Object(r.a)(Object(r.a)({},d),{},{_id:a,page:u})}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),n({type:o.c.ALERT,payload:{error:e.t0.response.data.msg}});case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}()},O=function(e){var t=e.auth,a=e.id,n=e.page,u=void 0===n?1:n;return function(){var e=Object(s.a)(c.a.mark((function e(n){var s,d;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(i.b)("groupmessage/".concat(a,"?limit=").concat(9*u),t.token);case 3:s=e.sent,d=Object(r.a)(Object(r.a)({},s.data),{},{groupmessages:s.data.groupmessages.reverse()}),n({type:l.UPDATE_GROUPMESSAGES,payload:Object(r.a)(Object(r.a)({},d),{},{_id:a,page:u})}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),n({type:o.c.ALERT,payload:{error:e.t0.response.data.msg}});case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}()},m=function(e){var t=e.msg,a=e.data,n=e.auth;return function(){var e=Object(s.a)(c.a.mark((function e(r){var s;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=Object(o.a)(a,t._id),r({type:l.DELETE_GROUPMESSAGES,payload:{newData:s,_id:t.recipient}}),e.prev=2,e.next=5,Object(i.a)("groupmessage/".concat(t._id),n.token);case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),r({type:o.c.ALERT,payload:{error:e.t0.response.data.msg}});case 10:case"end":return e.stop()}}),e,null,[[2,7]])})));return function(t){return e.apply(this,arguments)}}()}},,,,function(e,t,a){"use strict";a.d(t,"a",(function(){return j})),a.d(t,"c",(function(){return b})),a.d(t,"e",(function(){return p})),a.d(t,"b",(function(){return f})),a.d(t,"d",(function(){return O}));var n=a(9),c=a(4),r=a.n(c),s=a(2),o=a(7),i=a(3),u=a(8),l=a(23),d=a(13),j={LOADING:"LOADING_PROFILE",GET_USER:"GET_PROFILE_USER",FOLLOW:"FOLLOW",UNFOLLOW:"UNFOLLOW",GET_ID:"GET_PROFILE_ID",GET_POSTS:"GET_PROFILE_POSTS",UPDATE_POST:"UPDATE_PROFILE_POST"},b=function(e){var t=e.id,a=e.auth;return function(){var e=Object(o.a)(r.a.mark((function e(n){var c,o,l,d;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n({type:j.GET_ID,payload:t}),e.prev=1,n({type:j.LOADING,payload:!0}),c=Object(u.b)("/user/".concat(t),a.token),o=Object(u.b)("/user_posts/".concat(t),a.token),e.next=7,c;case 7:return l=e.sent,e.next=10,o;case 10:d=e.sent,n({type:j.GET_USER,payload:l.data}),n({type:j.GET_POSTS,payload:Object(s.a)(Object(s.a)({},d.data),{},{_id:t,page:2})}),n({type:j.LOADING,payload:!1}),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(1),n({type:i.c.ALERT,payload:{error:e.t0.response.data.msg}});case 19:case"end":return e.stop()}}),e,null,[[1,16]])})));return function(t){return e.apply(this,arguments)}}()},p=function(e){var t=e.userData,a=e.avatar,n=e.auth;return function(){var e=Object(o.a)(r.a.mark((function e(c){var o,d;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.fullname){e.next=2;break}return e.abrupt("return",c({type:i.c.ALERT,payload:{error:"Please add your full name."}}));case 2:if(!(t.fullname.length>25)){e.next=4;break}return e.abrupt("return",c({type:i.c.ALERT,payload:{error:"Your full name too long."}}));case 4:if(!(t.story.length>200)){e.next=6;break}return e.abrupt("return",c({type:i.c.ALERT,payload:{error:"Your story too long."}}));case 6:if(e.prev=6,c({type:i.c.ALERT,payload:{loading:!0}}),!a){e.next=12;break}return e.next=11,Object(l.c)([a]);case 11:o=e.sent;case 12:return e.next=14,Object(u.c)("user",Object(s.a)(Object(s.a)({},t),{},{avatar:a?o[0].url:n.user.avatar}),n.token);case 14:d=e.sent,c({type:i.c.AUTH,payload:Object(s.a)(Object(s.a)({},n),{},{user:Object(s.a)(Object(s.a)(Object(s.a)({},n.user),t),{},{avatar:a?o[0].url:n.user.avatar})})}),c({type:i.c.ALERT,payload:{success:d.data.msg}}),e.next=22;break;case 19:e.prev=19,e.t0=e.catch(6),c({type:i.c.ALERT,payload:{error:e.t0.response.data.msg}});case 22:case"end":return e.stop()}}),e,null,[[6,19]])})));return function(t){return e.apply(this,arguments)}}()},f=function(e){var t=e.users,a=e.user,c=e.auth,l=e.socket;return function(){var e=Object(o.a)(r.a.mark((function e(o){var b,p,f;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.every((function(e){return e._id!==a._id}))?b=Object(s.a)(Object(s.a)({},a),{},{followers:[].concat(Object(n.a)(a.followers),[c.user])}):t.forEach((function(e){e._id===a._id&&(b=Object(s.a)(Object(s.a)({},e),{},{followers:[].concat(Object(n.a)(e.followers),[c.user])}))})),o({type:j.FOLLOW,payload:b}),o({type:i.c.AUTH,payload:Object(s.a)(Object(s.a)({},c),{},{user:Object(s.a)(Object(s.a)({},c.user),{},{following:[].concat(Object(n.a)(c.user.following),[b])})})}),e.prev=3,e.next=6,Object(u.c)("user/".concat(a._id,"/follow"),null,c.token);case 6:p=e.sent,l.emit("follow",p.data.newUser),f={id:c.user._id,text:"has started to follow you.",recipients:[b._id],url:"/profile/".concat(c.user._id)},o(Object(d.b)({msg:f,auth:c,socket:l})),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(3),o({type:i.c.ALERT,payload:{error:e.t0.response.data.msg}});case 15:case"end":return e.stop()}}),e,null,[[3,12]])})));return function(t){return e.apply(this,arguments)}}()},O=function(e){var t=e.users,a=e.user,n=e.auth,c=e.socket;return function(){var e=Object(o.a)(r.a.mark((function e(o){var l,b,p;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.every((function(e){return e._id!==a._id}))?l=Object(s.a)(Object(s.a)({},a),{},{followers:Object(i.a)(a.followers,n.user._id)}):t.forEach((function(e){e._id===a._id&&(l=Object(s.a)(Object(s.a)({},e),{},{followers:Object(i.a)(e.followers,n.user._id)}))})),o({type:j.UNFOLLOW,payload:l}),o({type:i.c.AUTH,payload:Object(s.a)(Object(s.a)({},n),{},{user:Object(s.a)(Object(s.a)({},n.user),{},{following:Object(i.a)(n.user.following,l._id)})})}),e.prev=3,e.next=6,Object(u.c)("user/".concat(a._id,"/unfollow"),null,n.token);case 6:b=e.sent,c.emit("unFollow",b.data.newUser),p={id:n.user._id,text:"has started to follow you.",recipients:[l._id],url:"/profile/".concat(n.user._id)},o(Object(d.f)({msg:p,auth:n,socket:c})),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(3),o({type:i.c.ALERT,payload:{error:e.t0.response.data.msg}});case 15:case"end":return e.stop()}}),e,null,[[3,12]])})));return function(t){return e.apply(this,arguments)}}()}},function(e,t,a){"use strict";a.d(t,"a",(function(){return u})),a.d(t,"c",(function(){return l})),a.d(t,"b",(function(){return d}));var n=a(4),c=a.n(n),r=a(60),s=a(7),o=a(45),i=a.n(o),u=function(e){var t="";return e?(e.size>209715200&&(t="The largest image size is 200mb."),"image/jpeg"!==e.type&&"image/png"!==e.type&&(t="Image format is incorrect."),t):"File does not exist."},l=function(){var e=Object(s.a)(c.a.mark((function e(t){var a,n,s,o,u,l;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=[],n="",!t){e.next=30;break}s=Object(r.a)(t),e.prev=4,s.s();case 6:if((o=s.n()).done){e.next=22;break}return u=o.value,l=new FormData,n=u.type.match(/video/i)?Date.now()+"video "+u.name:Date.now()+u.name,l.append("name",n),l.append("file",u),e.prev=12,e.next=15,i.a.post("/api/upload",l);case 15:a.push({url:n}),e.next=20;break;case 18:e.prev=18,e.t0=e.catch(12);case 20:e.next=6;break;case 22:e.next=27;break;case 24:e.prev=24,e.t1=e.catch(4),s.e(e.t1);case 27:return e.prev=27,s.f(),e.finish(27);case 30:return e.abrupt("return",a);case 31:case"end":return e.stop()}}),e,null,[[4,24,27,30],[12,18]])})));return function(t){return e.apply(this,arguments)}}(),d=function(e){console.log("file",e);var t,a=Object(r.a)(e);try{for(a.s();!(t=a.n()).done;){var n=t.value;console.log("fileclinte2",n.url);try{i.a.delete("/api/delete/".concat(n.url))}catch(c){console.log(c)}}}catch(c){a.e(c)}finally{a.f()}}},,,function(e,t,a){"use strict";var n=a(0),c=(a(1),a(17)),r=a(11),s=a(5);t.a=function(e){var t=e.children,a=e.user,o=e.border,i=e.handleClose,u=e.setShowFollowers,l=e.setShowFollowing,d=e.msg,j=Object(s.c)((function(e){return e})).theme;return Object(n.jsxs)("div",{className:"d-flex p-2 align-items-center justify-content-between w-100 ".concat(o),children:[Object(n.jsx)("div",{children:Object(n.jsxs)(r.b,{to:"/profile/".concat(a._id),onClick:function(){i&&i(),u&&u(!1),l&&l(!1)},className:"d-flex align-items-center",children:[Object(n.jsx)(c.a,{src:a.avatar,size:"big-avatar"}),Object(n.jsxs)("div",{className:"ml-1",style:{transform:"translateY(-2px)"},children:[Object(n.jsx)("span",{className:"d-block",children:a.username}),Object(n.jsx)("small",{style:{opacity:.7},children:d?function(e){return Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)("div",{style:{filter:j?"invert(1)":"invert(0)"},children:e.text}),e.media.length>0&&Object(n.jsxs)("div",{children:[e.media.length," ",Object(n.jsx)("i",{className:"fas fa-image"})]}),e.call&&Object(n.jsx)("span",{className:"material-icons",children:0===e.call.times?e.call.video?"videocam_off":"phone_disabled":e.call.video?"video_camera_front":"call"})]})}(a):a.fullname})]})]})}),t]})}},,,,,,,,,,,,function(e,t,a){"use strict";a.d(t,"a",(function(){return c})),a.d(t,"b",(function(){return r}));var n=a(0),c=function(e,t){return Object(n.jsx)("img",{src:e,alt:"images",className:"img-thumbnail",style:{filter:t?"invert(1)":"invert(0)"}})},r=function(e,t){return Object(n.jsx)("video",{controls:!0,src:e,alt:"images",className:"img-thumbnail",style:{filter:t?"invert(1)":"invert(0)"}})}},,,,,,,,,function(e,t,a){"use strict";var n=a(0);a(1);t.a=function(e){var t=e.result,a=e.page,c=e.load,r=e.handleLoadMore;return Object(n.jsx)(n.Fragment,{children:t<9*(a-1)?"":!c&&Object(n.jsx)("button",{className:"btn btn-dark mx-auto d-block",onClick:r,children:"Load more"})})}},function(e,t,a){"use strict";var n=a(0);a(1);t.a=function(e){var t=e.setContent,a=e.content,c=e.theme;return Object(n.jsxs)("div",{className:"nav-item dropdown",style:{opacity:1,filter:c?"invert(1)":"invert(0)"},children:[Object(n.jsx)("span",{className:"nav-link position-relative px-1",id:"navbarDropdown",role:"button","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false",children:Object(n.jsx)("span",{style:{opacity:.4},children:"\ud83d\ude04"})}),Object(n.jsx)("div",{className:"dropdown-menu","aria-labelledby":"navbarDropdown",children:Object(n.jsx)("div",{className:"reactions",children:["\u2764\ufe0f","\ud83d\ude06","\ud83d\ude2f","\ud83d\ude22","\ud83d\ude21","\ud83d\udc4d","\ud83d\udc4e","\ud83d\ude04","\ud83d\ude02","\ud83d\ude0d","\ud83d\ude18","\ud83d\ude17","\ud83d\ude1a","\ud83d\ude33","\ud83d\ude2d","\ud83d\ude13","\ud83d\ude24","\ud83e\udd24","\ud83d\udc7b","\ud83d\udc80","\ud83e\udd10","\ud83d\ude34","\ud83d\ude37","\ud83d\ude35"].map((function(e){return Object(n.jsx)("span",{onClick:function(){return t(a+e)},children:e},e)}))})})]})}},function(e,t,a){"use strict";var n=a(0),c=a(4),r=a.n(c),s=a(7),o=a(6),i=a(1),u=a(5),l=a(22);t.a=function(e){var t=e.user,a=Object(i.useState)(!1),c=Object(o.a)(a,2),d=c[0],j=c[1],b=Object(u.c)((function(e){return e})),p=b.auth,f=b.profile,O=b.socket,m=Object(u.b)(),h=Object(i.useState)(!1),x=Object(o.a)(h,2),v=x[0],g=x[1];Object(i.useEffect)((function(){return p.user.following.find((function(e){return e._id===t._id}))&&j(!0),function(){return j(!1)}}),[p.user.following,t._id]);var y=function(){var e=Object(s.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!v){e.next=2;break}return e.abrupt("return");case 2:return j(!0),g(!0),e.next=6,m(Object(l.b)({users:f.users,user:t,auth:p,socket:O}));case 6:g(!1);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),E=function(){var e=Object(s.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!v){e.next=2;break}return e.abrupt("return");case 2:return j(!1),g(!0),e.next=6,m(Object(l.d)({users:f.users,user:t,auth:p,socket:O}));case 6:g(!1);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(n.jsx)(n.Fragment,{children:d?Object(n.jsx)("button",{className:"btn btn-outline-danger",onClick:E,children:"UnFollow"}):Object(n.jsx)("button",{className:"btn btn-outline-info",onClick:y,children:"Follow"})})}},function(e,t,a){"use strict";a.d(t,"a",(function(){return u})),a.d(t,"c",(function(){return l})),a.d(t,"d",(function(){return d})),a.d(t,"b",(function(){return j}));var n=a(4),c=a.n(n),r=a(7),s=a(3),o=a(8);var i=function(e){var t=e.fullname,a=e.username,n=e.email,c=e.password,r=e.cf_password,s={};return t?t.length>25&&(s.fullname="Full name is up to 25 characters long."):s.fullname="Please add your full name.",a?a.replace(/ /g,"").length>25&&(s.username="User name is up to 25 characters long."):s.username="Please add your user name.",n?function(e){return/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(e)}(n)||(s.email="Email format is incorrect."):s.email="Please add your email.",c?c.length<6&&(s.password="Password must be at least 6 characters."):s.password="Please add your password.",c!==r&&(s.cf_password="Confirm password did not match."),{errMsg:s,errLength:Object.keys(s).length}},u=function(e){return function(){var t=Object(r.a)(c.a.mark((function t(a){var n;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a({type:s.c.ALERT,payload:{loading:!0}}),t.next=4,Object(o.d)("login",e);case 4:n=t.sent,a({type:s.c.AUTH,payload:{token:n.data.access_token,user:n.data.user}}),localStorage.setItem("firstLogin",!0),a({type:s.c.ALERT,payload:{success:n.data.msg}}),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(0),a({type:s.c.ALERT,payload:{error:t.t0.response.data.msg}});case 13:case"end":return t.stop()}}),t,null,[[0,10]])})));return function(e){return t.apply(this,arguments)}}()},l=function(){return function(){var e=Object(r.a)(c.a.mark((function e(t){var a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!localStorage.getItem("firstLogin")){e.next=14;break}return t({type:s.c.ALERT,payload:{loading:!0}}),e.prev=3,e.next=6,Object(o.d)("refresh_token");case 6:a=e.sent,t({type:s.c.AUTH,payload:{token:a.data.access_token,user:a.data.user}}),t({type:s.c.ALERT,payload:{}}),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(3),t({type:s.c.ALERT,payload:{error:e.t0.response.data.msg}});case 14:case"end":return e.stop()}}),e,null,[[3,11]])})));return function(t){return e.apply(this,arguments)}}()},d=function(e){return function(){var t=Object(r.a)(c.a.mark((function t(a){var n,r;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!((n=i(e)).errLength>0)){t.next=3;break}return t.abrupt("return",a({type:s.c.ALERT,payload:n.errMsg}));case 3:return t.prev=3,a({type:s.c.ALERT,payload:{loading:!0}}),t.next=7,Object(o.d)("register",e);case 7:r=t.sent,a({type:s.c.AUTH,payload:{token:r.data.access_token,user:r.data.user}}),localStorage.setItem("firstLogin",!0),a({type:s.c.ALERT,payload:{success:r.data.msg}}),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(3),a({type:s.c.ALERT,payload:{error:t.t0.response.data.msg}});case 16:case"end":return t.stop()}}),t,null,[[3,13]])})));return function(e){return t.apply(this,arguments)}}()},j=function(){return function(){var e=Object(r.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,localStorage.removeItem("firstLogin"),e.next=4,Object(o.d)("logout");case 4:window.location.href="/",e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),t({type:s.c.ALERT,payload:{error:e.t0.response.data.msg}});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()}},function(e,t,a){"use strict";a.d(t,"a",(function(){return i})),a.d(t,"b",(function(){return u}));var n=a(4),c=a.n(n),r=a(7),s=a(3),o=a(8),i={LOADING:"LOADING_SUGGES",GET_USERS:"GET_USERS_SUGGES"},u=function(e){return function(){var t=Object(r.a)(c.a.mark((function t(a){var n;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a({type:i.LOADING,payload:!0}),t.next=4,Object(o.b)("suggestionsUser",e);case 4:n=t.sent,a({type:i.GET_USERS,payload:n.data}),a({type:i.LOADING,payload:!1}),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),a({type:s.c.ALERT,payload:{error:t.t0.response.data.msg}});case 12:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e){return t.apply(this,arguments)}}()}},function(e,t,a){"use strict";a.d(t,"a",(function(){return i})),a.d(t,"b",(function(){return u}));var n=a(4),c=a.n(n),r=a(7),s=a(3),o=a(8),i={LOADING:"LOADING_DISCOVER",GET_POSTS:"GET_DISCOVER_POSTS",UPDATE_POST:"UPDATE_DISCOVER_POST"},u=function(e){return function(){var t=Object(r.a)(c.a.mark((function t(a){var n;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a({type:i.LOADING,payload:!0}),t.next=4,Object(o.b)("post_discover",e);case 4:n=t.sent,a({type:i.GET_POSTS,payload:n.data}),a({type:i.LOADING,payload:!1}),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),a({type:s.c.ALERT,payload:{error:t.t0.response.data.msg}});case 12:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e){return t.apply(this,arguments)}}()}},,,,function(e,t,a){"use strict";var n=a(0),c=(a(1),a(11)),r=a(5);t.a=function(e){var t=e.posts,a=e.result,s=Object(r.c)((function(e){return e})).theme;return 0===a?Object(n.jsx)("h2",{className:"text-center text-danger",children:"No Post"}):Object(n.jsx)("div",{className:"post_thumb",children:t.map((function(e){return Object(n.jsx)(c.b,{to:"/post/".concat(e._id),children:Object(n.jsxs)("div",{className:"post_thumb_display",children:[e.images[0].url.match(/video/i)?Object(n.jsx)("video",{controls:!0,src:e.images[0].url,alt:e.images[0].url,style:{filter:s?"invert(1)":"invert(0)"}}):Object(n.jsx)("img",{src:e.images[0].url,alt:e.images[0].url,style:{filter:s?"invert(1)":"invert(0)"}}),Object(n.jsxs)("div",{className:"post_thumb_menu",children:[Object(n.jsx)("i",{className:"far fa-heart",children:e.likes.length}),Object(n.jsx)("i",{className:"far fa-comment",children:e.comments.length})]})]})},e._id)}))})}},,,,,function(e,t,a){"use strict";a.d(t,"a",(function(){return c})),a.d(t,"b",(function(){return r}));var n=a(0),c=function(e,t){return Object(n.jsx)("img",{src:"/public/images/".concat(e),alt:"images",className:"img-thumbnail",style:{filter:t?"invert(1)":"invert(0)"}})},r=function(e,t){return Object(n.jsx)("video",{controls:!0,src:"/public/images/".concat(e),alt:"images",className:"img-thumbnail",style:{filter:t?"invert(1)":"invert(0)"}})}},,,function(e,t,a){"use strict";var n=a(0),c=(a(1),a(17)),r=a(11),s=a(5);t.a=function(e){var t=e.children,a=e.group,o=e.border,i=e.handleClose,u=e.setShowFollowers,l=e.setShowFollowing,d=e.msg,j=Object(s.c)((function(e){return e})).theme;return Object(n.jsxs)("div",{className:"d-flex p-2 align-items-center justify-content-between w-100 ".concat(o),children:[Object(n.jsx)("div",{children:Object(n.jsxs)(r.b,{to:"/profile/".concat(a._id),onClick:function(){i&&i(),u&&u(!1),l&&l(!1)},className:"d-flex align-items-center",children:[Object(n.jsx)(c.a,{src:a.avatar,size:"big-avatar"}),Object(n.jsxs)("div",{className:"ml-1",style:{transform:"translateY(-2px)"},children:[Object(n.jsx)("span",{className:"d-block",children:a.groupname}),Object(n.jsx)("small",{style:{opacity:.7},children:d?function(e){return Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)("div",{style:{filter:j?"invert(1)":"invert(0)"},children:e.text}),e.media.length>0&&Object(n.jsxs)("div",{children:[e.media.length," ",Object(n.jsx)("i",{className:"fas fa-image"})]})]})}(a):""})]})]})}),t]})}},function(e,t,a){"use strict";a.r(t);var n=a(0),c=(a(1),a(76));t.default=function(){return Object(n.jsxs)("div",{className:"gmessage d-flex",children:[Object(n.jsx)("div",{className:"col-md-4 border-right px-0",children:Object(n.jsx)(c.a,{})}),Object(n.jsx)("div",{className:"col-md-8 px-0 right_mess",children:Object(n.jsxs)("div",{className:"d-flex justify-content-center  align-items-center flex-column h-100",children:[Object(n.jsx)("i",{className:"fab fa-telegram text-primary",style:{fontSize:"5rem"}}),Object(n.jsx)("h4",{children:"group Message"})]})})]})}},function(e,t,a){"use strict";a.r(t);var n=a(0),c=(a(1),a(72));t.default=function(){return Object(n.jsxs)("div",{className:"message d-flex",children:[Object(n.jsx)("div",{className:"col-md-4 border-right px-0",children:Object(n.jsx)(c.a,{})}),Object(n.jsx)("div",{className:"col-md-8 px-0 right_mess",children:Object(n.jsxs)("div",{className:"d-flex justify-content-center  align-items-center flex-column h-100",children:[Object(n.jsx)("i",{className:"fab fa-facebook-messenger text-primary",style:{fontSize:"5rem"}}),Object(n.jsx)("h4",{children:"Messenger"})]})})]})}},,,function(e,t,a){"use strict";a.r(t);var n=a(0),c=a(40),r=a(2),s=a(6),o=a(1),i=a(15),u=a(11),l=a(50),d=a(5);t.default=function(){var e=Object(o.useState)({email:"",password:""}),t=Object(s.a)(e,2),a=t[0],j=t[1],b=a.email,p=a.password,f=Object(o.useState)(!1),O=Object(s.a)(f,2),m=O[0],h=O[1],x=Object(d.c)((function(e){return e})).auth,v=Object(d.b)(),g=Object(i.f)();Object(o.useEffect)((function(){x.token&&g.push("/")}),[x.token,g]);var y=function(e){var t=e.target,n=t.name,s=t.value;j(Object(r.a)(Object(r.a)({},a),{},Object(c.a)({},n,s)))};return Object(n.jsx)("div",{className:"auth_page",children:Object(n.jsxs)("form",{onSubmit:function(e){e.preventDefault(),v(Object(l.a)(a))},children:[Object(n.jsx)("h3",{className:"text-uppercase text-center mb-4",children:"R-Network"}),Object(n.jsxs)("div",{className:"form-group",children:[Object(n.jsx)("label",{htmlFor:"exampleInputEmail1",children:"Email address"}),Object(n.jsx)("input",{type:"email",className:"form-control",id:"exampleInputEmail1",name:"email","aria-describedby":"emailHelp",onChange:y,value:b}),Object(n.jsx)("small",{id:"emailHelp",className:"form-text text-muted",children:"We'll never share your email with anyone else."})]}),Object(n.jsxs)("div",{className:"form-group",children:[Object(n.jsx)("label",{htmlFor:"exampleInputPassword1",children:"Password"}),Object(n.jsxs)("div",{className:"pass",children:[Object(n.jsx)("input",{type:m?"text":"password",className:"form-control",id:"exampleInputPassword1",onChange:y,value:p,name:"password"}),Object(n.jsx)("small",{onClick:function(){return h(!m)},children:m?"Hide":"Show"})]})]}),Object(n.jsx)("button",{type:"submit",className:"btn btn-dark w-100",disabled:!b||!p,children:"Login"}),Object(n.jsxs)("p",{className:"my-2",children:["You don't have an account?"," ",Object(n.jsx)(u.b,{to:"/register",style:{color:"crimson"},children:"Register Now"})]})]})})}},function(e,t,a){"use strict";a.r(t);var n=a(0),c=a(40),r=a(2),s=a(6),o=a(1),i=a(5),u=a(15),l=a(11),d=a(50);t.default=function(){var e=Object(i.c)((function(e){return e})),t=e.auth,a=e.alert,j=Object(i.b)(),b=Object(u.f)(),p="male.png",f={fullname:"",username:"",email:"",password:"",cf_password:"",gender:"male",avatar:p},O=Object(o.useState)(f),m=Object(s.a)(O,2),h=m[0],x=m[1],v=h.fullname,g=h.username,y=h.email,E=h.password,N=h.cf_password,w=Object(o.useState)(!1),k=Object(s.a)(w,2),_=k[0],S=k[1],T=Object(o.useState)(!1),A=Object(s.a)(T,2),L=A[0],C=A[1];Object(o.useEffect)((function(){t.token&&b.push("/")}),[t.token,b]);var D=function(e){var t,a=e.target,n=a.name,s=a.value;"gender"===n&&(p=s+".png"),x(Object(r.a)(Object(r.a)({},h),{},(t={},Object(c.a)(t,n,s),Object(c.a)(t,"avatar",p),t)))};return Object(n.jsx)("div",{className:"auth_page",children:Object(n.jsxs)("form",{onSubmit:function(e){e.preventDefault(),j(Object(d.d)(h)),console.log("userData",h)},children:[Object(n.jsx)("h3",{className:"text-uppercase text-center mb-4",children:"R-Network"}),Object(n.jsxs)("div",{className:"form-group",children:[Object(n.jsx)("label",{htmlFor:"fullname",children:"Full Name"}),Object(n.jsx)("input",{type:"text",className:"form-control",id:"fullname",name:"fullname",onChange:D,value:v,style:{background:"".concat(a.fullname?"#fd2d6a14":"")}}),Object(n.jsx)("small",{className:"form-text text-danger",children:a.fullname?a.fullname:""})]}),Object(n.jsxs)("div",{className:"form-group",children:[Object(n.jsx)("label",{htmlFor:"username",children:"User Name"}),Object(n.jsx)("input",{type:"text",className:"form-control",id:"username",name:"username",onChange:D,value:g.toLowerCase().replace(/ /g,""),style:{background:"".concat(a.username?"#fd2d6a14":"")}}),Object(n.jsx)("small",{className:"form-text text-danger",children:a.username?a.username:""})]}),Object(n.jsxs)("div",{className:"form-group",children:[Object(n.jsx)("label",{htmlFor:"exampleInputEmail1",children:"Email address"}),Object(n.jsx)("input",{type:"email",className:"form-control",id:"exampleInputEmail1",name:"email",onChange:D,value:y,style:{background:"".concat(a.email?"#fd2d6a14":"")}}),Object(n.jsx)("small",{className:"form-text text-danger",children:a.email?a.email:""})]}),Object(n.jsxs)("div",{className:"form-group",children:[Object(n.jsx)("label",{htmlFor:"exampleInputPassword1",children:"Password"}),Object(n.jsxs)("div",{className:"pass",children:[Object(n.jsx)("input",{type:_?"text":"password",className:"form-control",id:"exampleInputPassword1",onChange:D,value:E,name:"password",style:{background:"".concat(a.password?"#fd2d6a14":"")}}),Object(n.jsx)("small",{onClick:function(){return S(!_)},children:_?"Hide":"Show"})]}),Object(n.jsx)("small",{className:"form-text text-danger",children:a.password?a.password:""})]}),Object(n.jsxs)("div",{className:"form-group",children:[Object(n.jsx)("label",{htmlFor:"cf_password",children:"Confirm Password"}),Object(n.jsxs)("div",{className:"pass",children:[Object(n.jsx)("input",{type:L?"text":"password",className:"form-control",id:"cf_password",onChange:D,value:N,name:"cf_password",style:{background:"".concat(a.cf_password?"#fd2d6a14":"")}}),Object(n.jsx)("small",{onClick:function(){return C(!L)},children:L?"Hide":"Show"})]}),Object(n.jsx)("small",{className:"form-text text-danger",children:a.cf_password?a.cf_password:""})]}),Object(n.jsxs)("div",{className:"row justify-content-around mx-0 mb-1",children:[Object(n.jsxs)("label",{htmlFor:"male",children:["Male:"," ",Object(n.jsx)("input",{type:"radio",id:"male",name:"gender",value:"male",defaultChecked:!0,onChange:D})]}),Object(n.jsxs)("label",{htmlFor:"female",children:["Female:"," ",Object(n.jsx)("input",{type:"radio",id:"female",name:"gender",value:"female",onChange:D})]})]}),Object(n.jsx)("button",{type:"submit",className:"btn btn-dark w-100",children:"Register"}),Object(n.jsxs)("p",{className:"my-2",children:["Already have an account?"," ",Object(n.jsx)(l.b,{to:"/",style:{color:"crimson"},children:"Login Now"})]})]})})}},function(e,t,a){"use strict";a.r(t);var n=a(0),c=a(1),r=a(17),s=a(5),o=a(3),i=function(){var e=Object(s.c)((function(e){return e})).auth,t=Object(s.b)();return Object(n.jsxs)("div",{className:"status my-3 d-flex",children:[Object(n.jsx)(r.a,{src:e.user.avatar,size:"big-avatar"}),Object(n.jsxs)("button",{className:"statusBtn flex-fill",onClick:function(){return t({type:o.c.STATUS,payload:!0})},children:[e.user.username,", what are you thinking?"]})]})},u=a(4),l=a.n(u),d=a(2),j=a(7),b=a(6),p=a(75),f=a(16),O=a(47),m=a(8),h=a(10),x=function(){var e=Object(s.c)((function(e){return e})),t=e.homePosts,a=e.auth,r=e.theme,o=Object(s.b)(),i=Object(c.useState)(!1),u=Object(b.a)(i,2),x=u[0],v=u[1],g=function(){var e=Object(j.a)(l.a.mark((function e(){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return v(!0),e.next=3,Object(m.b)("posts?limit=".concat(9*t.page),a.token);case 3:n=e.sent,o({type:h.a.GET_POSTS,payload:Object(d.a)(Object(d.a)({},n.data),{},{page:t.page+1})}),v(!1);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(n.jsxs)("div",{className:"posts",children:[t.posts.map((function(e){return Object(n.jsx)(p.a,{post:e,theme:r},e._id)})),x&&Object(n.jsx)("img",{src:f.a,alt:"loading",className:"d-block mx-auto"}),Object(n.jsx)(O.a,{result:t.result,page:t.page,load:x,handleLoadMore:g})]})},v=a(26),g=a(49),y=a(51),E=function(){var e=Object(s.c)((function(e){return e})),t=e.auth,a=e.suggestions,c=Object(s.b)();return Object(n.jsxs)("div",{className:"mt-3",children:[Object(n.jsx)(v.a,{user:t.user}),Object(n.jsxs)("div",{className:"d-flex justify-content-between align-items-center my-2",children:[Object(n.jsx)("h5",{className:"text-danger",children:"Suggestions for you"}),!a.loading&&Object(n.jsx)("i",{className:"fas fa-redo",style:{cursor:"pointer"},onClick:function(){return c(Object(y.b)(t.token))}})]}),a.loading?Object(n.jsx)("img",{src:f.a,alt:"loading",className:"d-block mx-auto my-4"}):Object(n.jsx)("div",{className:"suggestions",children:a.users.map((function(e){return Object(n.jsx)(v.a,{user:e,children:Object(n.jsx)(g.a,{user:e})},e._id)}))}),Object(n.jsxs)("div",{style:{opacity:.5},className:"my-2",children:[Object(n.jsx)("a",{href:"https://www.youtube.com/c/DevATHTML",target:"_blank",rel:"noreferrer",style:{wordBreak:"break-all"},children:"http://eeu.vercel.app/"}),Object(n.jsx)("small",{className:"d-block",children:'Welcome to our channel "Robel"'}),Object(n.jsx)("small",{children:"\xa9 2021 R-NETWORK FROM Robel Gulima"})]})]})},N=0;t.default=function(){var e=Object(s.c)((function(e){return e})).homePosts;return window.addEventListener("scroll",(function(){if("/"===window.location.pathname)return N=window.pageYOffset})),Object(c.useEffect)((function(){setTimeout((function(){window.scrollTo({top:N,behavior:"smooth"})}),100)}),[]),Object(n.jsxs)("div",{className:"home row mx-0",children:[Object(n.jsxs)("div",{className:"col-md-8",children:[Object(n.jsx)(i,{}),e.loading?Object(n.jsx)("img",{src:f.a,alt:"loading",className:"d-block mx-auto"}):0===e.result&&0===e.posts.length?Object(n.jsx)("h2",{className:"text-center",children:"No Post"}):Object(n.jsx)(x,{})]}),Object(n.jsx)("div",{className:"col-md-4",children:Object(n.jsx)(E,{})})]})}},function(e,t,a){"use strict";var n=a(0),c=a(2),r=a(4),s=a.n(r),o=a(7),i=a(6),u=a(1),l=a(26),d=a(5),j=a(8),b=a(3),p=a(15),f=a(12);t.a=function(){var e=Object(d.c)((function(e){return e})),t=e.auth,a=e.message,r=e.online,O=Object(d.b)(),m=Object(u.useState)(""),h=Object(i.a)(m,2),x=h[0],v=h[1],g=Object(u.useState)([]),y=Object(i.a)(g,2),E=y[0],N=y[1],w=Object(p.f)(),k=Object(p.h)().id,_=Object(u.useRef)(),S=Object(u.useState)(0),T=Object(i.a)(S,2),A=T[0],L=T[1],C=function(){var e=Object(o.a)(s.a.mark((function e(a){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.preventDefault(),x){e.next=3;break}return e.abrupt("return",N([]));case 3:return e.prev=3,e.next=6,Object(j.b)("search?username=".concat(x),t.token);case 6:n=e.sent,N(n.data.users),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(3),O({type:b.c.ALERT,payload:{error:e.t0.response.data.msg}});case 13:case"end":return e.stop()}}),e,null,[[3,10]])})));return function(t){return e.apply(this,arguments)}}(),D=function(e){return v(""),N([]),O({type:f.a.ADD_USER,payload:Object(c.a)(Object(c.a)({},e),{},{text:"",media:[]})}),O({type:f.a.CHECK_ONLINE_OFFLINE,payload:r}),w.push("/message/".concat(e._id))},R=function(e){return k===e._id?"active":""};return Object(u.useEffect)((function(){a.firstLoad||O(Object(f.e)({auth:t}))}),[O,t,a.firstLoad]),Object(u.useEffect)((function(){new IntersectionObserver((function(e){e[0].isIntersecting&&L((function(e){return e+1}))}),{threshold:.1}).observe(_.current)}),[L]),Object(u.useEffect)((function(){a.resultUsers>=9*(A-1)&&A>1&&O(Object(f.e)({auth:t,page:A}))}),[a.resultUsers,A,t,O]),Object(u.useEffect)((function(){a.firstLoad&&O({type:f.a.CHECK_ONLINE_OFFLINE,payload:r})}),[r,a.firstLoad,O]),Object(n.jsxs)(n.Fragment,{children:[Object(n.jsxs)("form",{className:"message_header",onSubmit:C,children:[Object(n.jsx)("input",{type:"text",value:x,placeholder:"Enter to Search...",onChange:function(e){return v(e.target.value)}}),Object(n.jsx)("button",{type:"submit",style:{display:"none"},children:"Search"})]}),Object(n.jsxs)("div",{className:"message_chat_list",children:[0!==E.length?Object(n.jsx)(n.Fragment,{children:E.map((function(e){return Object(n.jsx)("div",{className:"message_user ".concat(R(e)),onClick:function(){return D(e)},children:Object(n.jsx)(l.a,{user:e})},e._id)}))}):Object(n.jsx)(n.Fragment,{children:a.users.map((function(e){return Object(n.jsx)("div",{className:"message_user ".concat(R(e)),onClick:function(){return D(e)},children:Object(n.jsx)(l.a,{user:e,msg:!0,children:e.online?Object(n.jsx)("i",{className:"fas fa-circle text-success"}):t.user.following.find((function(t){return t._id===e._id}))&&Object(n.jsx)("i",{className:"fas fa-circle"})})},e._id)}))}),Object(n.jsx)("button",{ref:_,style:{opacity:0},children:"Load More"})]})]})}},,,function(e,t,a){"use strict";var n=a(0),c=a(1),r=a(2),s=a(17),o=a(15),i=a(11),u=a(5),l=a(57),d=a.n(l),j=a(3),b=a(10),p="https://v-network-devat.herokuapp.com",f=function(e){var t=e.post,a=Object(u.c)((function(e){return e})),c=a.auth,l=a.socket,f=Object(u.b)(),O=Object(o.f)();return Object(n.jsxs)("div",{className:"card_header",children:[Object(n.jsxs)("div",{className:"d-flex",children:[Object(n.jsx)(s.a,{src:t.user.avatar,size:"big-avatar"}),Object(n.jsxs)("div",{className:"card_name",children:[Object(n.jsx)("h6",{className:"m-0",children:Object(n.jsx)(i.b,{to:"/profile/".concat(t.user._id),className:"text-dark",children:t.user.username})}),Object(n.jsx)("small",{className:"text-muted",children:d()(t.createdAt).fromNow()})]})]}),Object(n.jsxs)("div",{className:"nav-item dropdown",children:[Object(n.jsx)("span",{className:"material-icons",id:"moreLink","data-toggle":"dropdown",children:"more_horiz"}),Object(n.jsxs)("div",{className:"dropdown-menu",children:[c.user._id===t.user._id&&Object(n.jsxs)(n.Fragment,{children:[Object(n.jsxs)("div",{className:"dropdown-item",onClick:function(){f({type:j.c.STATUS,payload:Object(r.a)(Object(r.a)({},t),{},{onEdit:!0})})},children:[Object(n.jsx)("span",{className:"material-icons",children:"create"})," Edit Post"]}),Object(n.jsxs)("div",{className:"dropdown-item",onClick:function(){if(window.confirm("Are you sure want to delete this post?"))return f(Object(b.c)({post:t,auth:c,socket:l})),O.push("/")},children:[Object(n.jsx)("span",{className:"material-icons",children:"delete_outline"})," Remove Post"]})]}),Object(n.jsxs)("div",{className:"dropdown-item",onClick:function(){navigator.clipboard.writeText("".concat(p,"/post/").concat(t._id))},children:[Object(n.jsx)("span",{className:"material-icons",children:"content_copy"})," Copy Link"]})]})]})]})},O=a(6),m=function(e){var t=e.images,a=e.id,c=function(e){if(0===e)return"active"},r=Object(u.c)((function(e){return e})).theme;return Object(n.jsxs)("div",{id:"image".concat(a),className:"carousel slide","data-ride":"carousel",children:[Object(n.jsx)("ol",{className:"carousel-indicators",style:{zIndex:1},children:t.map((function(e,t){return Object(n.jsx)("li",{"data-target":"#image".concat(a),"data-slide-to":t,className:c(t)},t)}))}),Object(n.jsx)("div",{className:"carousel-inner",children:t.map((function(e,t){return Object(n.jsx)("div",{className:"carousel-item ".concat(c(t)),children:e.url.match(/video/i)?Object(n.jsx)("video",{controls:!0,src:"/public/images/".concat(e.url),className:"d-block w-100",alt:e.url,style:{filter:r?"invert(1)":"invert(0)"}}):Object(n.jsx)("img",{src:"/public/images/".concat(e.url),className:"d-block w-100",alt:e.url,style:{filter:r?"invert(1)":"invert(0)"}})},t)}))}),t.length>1&&Object(n.jsxs)(n.Fragment,{children:[Object(n.jsxs)("a",{className:"carousel-control-prev",href:"#image".concat(a),role:"button","data-slide":"prev",style:{width:"5%"},children:[Object(n.jsx)("span",{className:"carousel-control-prev-icon","aria-hidden":"true"}),Object(n.jsx)("span",{className:"sr-only",children:"Previous"})]}),Object(n.jsxs)("a",{className:"carousel-control-next",href:"#image".concat(a),role:"button","data-slide":"next",style:{width:"5%"},children:[Object(n.jsx)("span",{className:"carousel-control-next-icon","aria-hidden":"true"}),Object(n.jsx)("span",{className:"sr-only",children:"Next"})]})]})]})},h=function(e){var t=e.post,a=e.theme,r=Object(c.useState)(!1),s=Object(O.a)(r,2),o=s[0],i=s[1];return Object(n.jsxs)("div",{className:"card_body",children:[Object(n.jsxs)("div",{className:"card_body-content",style:{filter:a?"invert(1)":"invert(0)",color:a?"white":"#111"},children:[Object(n.jsx)("span",{children:t.content.length<60?t.content:o?t.content+" ":t.content.slice(0,60)+"....."}),t.content.length>60&&Object(n.jsx)("span",{className:"readMore",onClick:function(){return i(!o)},children:o?"Hide content":"Read more"})]}),t.images.length>0&&Object(n.jsx)(m,{images:t.images,id:t._id})]})},x=a(4),v=a.n(x),g=a(7),y=a.p+"static/media/send.fab9d966.svg",E=function(e){var t=e.isLike,a=e.handleLike,c=e.handleUnLike,r=Object(u.c)((function(e){return e})).theme;return Object(n.jsx)(n.Fragment,{children:t?Object(n.jsx)("i",{className:"fas fa-heart text-danger",onClick:c,style:{filter:r?"invert(1)":"invert(0)"}}):Object(n.jsx)("i",{className:"far fa-heart",onClick:a})})},N=a(142),w=a(143),k=a(144),_=a(145),S=a(146),T=a(147),A=a(148),L=a(149),C=a(150),D=a(151),R=a(152),P=a(153),I=function(e){var t=e.url,a=e.theme;return Object(n.jsxs)("div",{className:"d-flex justify-content-between px-4 py-2",style:{filter:a?"invert(1)":"invert(0)"},children:[Object(n.jsx)(N.a,{url:t,children:Object(n.jsx)(w.a,{round:!0,size:32})}),Object(n.jsx)(k.a,{url:t,children:Object(n.jsx)(_.a,{round:!0,size:32})}),Object(n.jsx)(S.a,{url:t,children:Object(n.jsx)(T.a,{round:!0,size:32})}),Object(n.jsx)(A.a,{url:t,children:Object(n.jsx)(L.a,{round:!0,size:32})}),Object(n.jsx)(C.a,{url:t,children:Object(n.jsx)(D.a,{round:!0,size:32})}),Object(n.jsx)(R.a,{url:t,children:Object(n.jsx)(P.a,{round:!0,size:32})})]})},U=function(e){var t=e.post,a=Object(c.useState)(!1),r=Object(O.a)(a,2),s=r[0],o=r[1],l=Object(c.useState)(!1),d=Object(O.a)(l,2),j=d[0],f=d[1],m=Object(c.useState)(!1),h=Object(O.a)(m,2),x=h[0],N=h[1],w=Object(u.c)((function(e){return e})),k=w.auth,_=w.theme,S=w.socket,T=Object(u.b)(),A=Object(c.useState)(!1),L=Object(O.a)(A,2),C=L[0],D=L[1],R=Object(c.useState)(!1),P=Object(O.a)(R,2),U=P[0],G=P[1];Object(c.useEffect)((function(){t.likes.find((function(e){return e._id===k.user._id}))?o(!0):o(!1)}),[t.likes,k.user._id]);var F=function(){var e=Object(g.a)(v.a.mark((function e(){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!j){e.next=2;break}return e.abrupt("return");case 2:return f(!0),e.next=5,T(Object(b.f)({post:t,auth:k,socket:S}));case 5:f(!1);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),M=function(){var e=Object(g.a)(v.a.mark((function e(){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!j){e.next=2;break}return e.abrupt("return");case 2:return f(!0),e.next=5,T(Object(b.h)({post:t,auth:k,socket:S}));case 5:f(!1);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(c.useEffect)((function(){k.user.saved.find((function(e){return e===t._id}))?D(!0):D(!1)}),[k.user.saved,t._id]);var H=function(){var e=Object(g.a)(v.a.mark((function e(){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!U){e.next=2;break}return e.abrupt("return");case 2:return G(!0),e.next=5,T(Object(b.g)({post:t,auth:k}));case 5:G(!1);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Q=function(){var e=Object(g.a)(v.a.mark((function e(){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!U){e.next=2;break}return e.abrupt("return");case 2:return G(!0),e.next=5,T(Object(b.i)({post:t,auth:k}));case 5:G(!1);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(n.jsxs)("div",{className:"card_footer",children:[Object(n.jsxs)("div",{className:"card_icon_menu",children:[Object(n.jsxs)("div",{children:[Object(n.jsx)(E,{isLike:s,handleLike:F,handleUnLike:M}),Object(n.jsx)(i.b,{to:"/post/".concat(t._id),className:"text-dark",children:Object(n.jsx)("i",{className:"far fa-comment"})}),Object(n.jsx)("img",{src:y,alt:"Send",onClick:function(){return N(!x)}})]}),C?Object(n.jsx)("i",{className:"fas fa-bookmark text-info",onClick:Q}):Object(n.jsx)("i",{className:"far fa-bookmark",onClick:H})]}),Object(n.jsxs)("div",{className:"d-flex justify-content-between",children:[Object(n.jsxs)("h6",{style:{padding:"0 25px",cursor:"pointer"},children:[t.likes.length," likes"]}),Object(n.jsxs)("h6",{style:{padding:"0 25px",cursor:"pointer"},children:[t.comments.length," comments"]})]}),x&&Object(n.jsx)(I,{url:"".concat(p,"/post/").concat(t._id),theme:_})]})},G=a(9),F=a(8),M=a(13),H=function(e){var t=e.comment,a=e.post,n=e.auth;return function(){var e=Object(g.a)(v.a.mark((function e(c){var s,o,i;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=Object(r.a)(Object(r.a)({},t),{},{likes:[].concat(Object(G.a)(t.likes),[n.user])}),o=Object(j.b)(a.comments,t._id,s),i=Object(r.a)(Object(r.a)({},a),{},{comments:o}),c({type:b.a.UPDATE_POST,payload:i}),e.prev=4,e.next=7,Object(F.c)("comment/".concat(t._id,"/like"),null,n.token);case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(4),c({type:j.c.ALERT,payload:{error:e.t0.response.data.msg}});case 12:case"end":return e.stop()}}),e,null,[[4,9]])})));return function(t){return e.apply(this,arguments)}}()},Q=function(e){var t=e.comment,a=e.post,n=e.auth;return function(){var e=Object(g.a)(v.a.mark((function e(c){var s,o,i;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=Object(r.a)(Object(r.a)({},t),{},{likes:Object(j.a)(t.likes,n.user._id)}),o=Object(j.b)(a.comments,t._id,s),i=Object(r.a)(Object(r.a)({},a),{},{comments:o}),c({type:b.a.UPDATE_POST,payload:i}),e.prev=4,e.next=7,Object(F.c)("comment/".concat(t._id,"/unlike"),null,n.token);case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(4),c({type:j.c.ALERT,payload:{error:e.t0.response.data.msg}});case 12:case"end":return e.stop()}}),e,null,[[4,9]])})));return function(t){return e.apply(this,arguments)}}()},z=function(e){var t=e.post,a=e.comment,c=e.setOnEdit,s=Object(u.c)((function(e){return e})),o=s.auth,i=s.socket,l=Object(u.b)(),d=function(){t.user._id!==o.user._id&&a.user._id!==o.user._id||l(function(e){var t=e.post,a=e.comment,n=e.auth,c=e.socket;return function(){var e=Object(g.a)(v.a.mark((function e(s){var o,i;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o=[].concat(Object(G.a)(t.comments.filter((function(e){return e.reply===a._id}))),[a]),i=Object(r.a)(Object(r.a)({},t),{},{comments:t.comments.filter((function(e){return!o.find((function(t){return e._id===t._id}))}))}),s({type:b.a.UPDATE_POST,payload:i}),c.emit("deleteComment",i);try{o.forEach((function(e){Object(F.a)("comment/".concat(e._id),n.token);var r={id:e._id,text:a.reply?"mentioned you in a comment.":"has commented on your post.",recipients:a.reply?[a.tag._id]:[t.user._id],url:"/post/".concat(t._id)};s(Object(M.f)({msg:r,auth:n,socket:c}))}))}catch(u){s({type:j.c.ALERT,payload:{error:u.response.data.msg}})}case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}({post:t,auth:o,comment:a,socket:i}))},p=function(){return Object(n.jsxs)(n.Fragment,{children:[Object(n.jsxs)("div",{className:"dropdown-item",onClick:function(){return c(!0)},children:[Object(n.jsx)("span",{className:"material-icons",children:"create"})," Edit"]}),Object(n.jsxs)("div",{className:"dropdown-item",onClick:d,children:[Object(n.jsx)("span",{className:"material-icons",children:"delete_outline"})," Remove"]})]})};return Object(n.jsx)("div",{className:"menu",children:(t.user._id===o.user._id||a.user._id===o.user._id)&&Object(n.jsxs)("div",{className:"nav-item dropdown",children:[Object(n.jsx)("span",{className:"material-icons",id:"moreLink","data-toggle":"dropdown",children:"more_vert"}),Object(n.jsx)("div",{className:"dropdown-menu","aria-labelledby":"moreLink",children:t.user._id===o.user._id?a.user._id===o.user._id?p():Object(n.jsxs)("div",{className:"dropdown-item",onClick:d,children:[Object(n.jsx)("span",{className:"material-icons",children:"delete_outline"})," Remove"]}):a.user._id===o.user._id&&p()})]})})},K=a(48),B=function(e){var t=e.children,a=e.post,s=e.onReply,o=e.setOnReply,i=Object(c.useState)(""),l=Object(O.a)(i,2),d=l[0],p=l[1],f=Object(u.c)((function(e){return e})),m=f.auth,h=f.socket,x=f.theme,y=Object(u.b)();return Object(n.jsxs)("form",{className:"card-footer comment_input",onSubmit:function(e){if(e.preventDefault(),!d.trim())return o?o(!1):void 0;p("");var t={content:d,likes:[],user:m.user,createdAt:(new Date).toISOString(),reply:s&&s.commentId,tag:s&&s.user};return y(function(e){var t=e.post,a=e.newComment,n=e.auth,c=e.socket;return function(){var e=Object(g.a)(v.a.mark((function e(s){var o,i,u,l,d,p;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=Object(r.a)(Object(r.a)({},t),{},{comments:[].concat(Object(G.a)(t.comments),[a])}),s({type:b.a.UPDATE_POST,payload:o}),e.prev=2,i=Object(r.a)(Object(r.a)({},a),{},{postId:t._id,postUserId:t.user._id}),e.next=6,Object(F.d)("comment",i,n.token);case 6:u=e.sent,l=Object(r.a)(Object(r.a)({},u.data.newComment),{},{user:n.user}),d=Object(r.a)(Object(r.a)({},t),{},{comments:[].concat(Object(G.a)(t.comments),[l])}),s({type:b.a.UPDATE_POST,payload:d}),c.emit("createComment",d),p={id:u.data.newComment._id,text:a.reply?"mentioned you in a comment.":"has commented on your post.",recipients:a.reply?[a.tag._id]:[t.user._id],url:"/post/".concat(t._id),content:t.content,image:t.images[0].url},s(Object(M.b)({msg:p,auth:n,socket:c})),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(2),s({type:j.c.ALERT,payload:{error:e.t0.response.data.msg}});case 18:case"end":return e.stop()}}),e,null,[[2,15]])})));return function(t){return e.apply(this,arguments)}}()}({post:a,newComment:t,auth:m,socket:h})),o?o(!1):void 0},children:[t,Object(n.jsx)("input",{type:"text",placeholder:"Add your comments...",value:d,onChange:function(e){return p(e.target.value)},style:{filter:x?"invert(1)":"invert(0)",color:x?"white":"#111",background:x?"rgba(0,0,0,.03)":""}}),Object(n.jsx)(K.a,{setContent:p,content:d,theme:x}),Object(n.jsx)("button",{type:"submit",className:"postBtn",children:"Post"})]})},Y=function(e){var t=e.children,a=e.comment,o=e.post,l=e.commentId,p=Object(u.c)((function(e){return e})),f=p.auth,m=p.theme,h=Object(u.b)(),x=Object(c.useState)(""),y=Object(O.a)(x,2),N=y[0],w=y[1],k=Object(c.useState)(!1),_=Object(O.a)(k,2),S=_[0],T=_[1],A=Object(c.useState)(!1),L=Object(O.a)(A,2),C=L[0],D=L[1],R=Object(c.useState)(!1),P=Object(O.a)(R,2),I=P[0],U=P[1],G=Object(c.useState)(!1),M=Object(O.a)(G,2),K=M[0],Y=M[1],X=Object(c.useState)(!1),V=Object(O.a)(X,2),Z=V[0],J=V[1];Object(c.useEffect)((function(){w(a.content),U(!1),J(!1),a.likes.find((function(e){return e._id===f.user._id}))&&U(!0)}),[a,f.user._id]);var W=function(){var e=Object(g.a)(v.a.mark((function e(){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!K){e.next=2;break}return e.abrupt("return");case 2:return U(!0),Y(!0),e.next=6,h(H({comment:a,post:o,auth:f}));case 6:Y(!1);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),q=function(){var e=Object(g.a)(v.a.mark((function e(){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!K){e.next=2;break}return e.abrupt("return");case 2:return U(!1),Y(!0),e.next=6,h(Q({comment:a,post:o,auth:f}));case 6:Y(!1);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),$={opacity:a._id?1:.5,pointerEvents:a._id?"inherit":"none"};return Object(n.jsxs)("div",{className:"comment_card mt-2",style:$,children:[Object(n.jsxs)(i.b,{to:"/profile/".concat(a.user._id),className:"d-flex text-dark",children:[Object(n.jsx)(s.a,{src:a.user.avatar,size:"small-avatar"}),Object(n.jsx)("h6",{className:"mx-1",children:a.user.username})]}),Object(n.jsxs)("div",{className:"comment_content",children:[Object(n.jsxs)("div",{className:"flex-fill",style:{filter:m?"invert(1)":"invert(0)",color:m?"white":"#111"},children:[C?Object(n.jsx)("textarea",{rows:"5",value:N,onChange:function(e){return w(e.target.value)}}):Object(n.jsxs)("div",{children:[a.tag&&a.tag._id!==a.user._id&&Object(n.jsxs)(i.b,{to:"/profile/".concat(a.tag._id),className:"mr-1",children:["@",a.tag.username]}),Object(n.jsx)("span",{children:N.length<100?N:S?N+" ":N.slice(0,100)+"...."}),N.length>100&&Object(n.jsx)("span",{className:"readMore",onClick:function(){return T(!S)},children:S?"Hide content":"Read more"})]}),Object(n.jsxs)("div",{style:{cursor:"pointer"},children:[Object(n.jsx)("small",{className:"text-muted mr-3",children:d()(a.createdAt).fromNow()}),Object(n.jsxs)("small",{className:"font-weight-bold mr-3",children:[a.likes.length," likes"]}),C?Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)("small",{className:"font-weight-bold mr-3",onClick:function(){a.content!==N?(h(function(e){var t=e.comment,a=e.post,n=e.content,c=e.auth;return function(){var e=Object(g.a)(v.a.mark((function e(s){var o,i;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o=Object(j.b)(a.comments,t._id,Object(r.a)(Object(r.a)({},t),{},{content:n})),i=Object(r.a)(Object(r.a)({},a),{},{comments:o}),s({type:b.a.UPDATE_POST,payload:i});try{Object(F.c)("comment/".concat(t._id),{content:n},c.token)}catch(u){s({type:j.c.ALERT,payload:{error:u.response.data.msg}})}case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}({comment:a,post:o,content:N,auth:f})),D(!1)):D(!1)},children:"update"}),Object(n.jsx)("small",{className:"font-weight-bold mr-3",onClick:function(){return D(!1)},children:"cancel"})]}):Object(n.jsx)("small",{className:"font-weight-bold mr-3",onClick:function(){if(Z)return J(!1);J(Object(r.a)(Object(r.a)({},a),{},{commentId:l}))},children:Z?"cancel":"reply"})]})]}),Object(n.jsxs)("div",{className:"d-flex align-items-center mx-2",style:{cursor:"pointer"},children:[Object(n.jsx)(z,{post:o,comment:a,setOnEdit:D}),Object(n.jsx)(E,{isLike:I,handleLike:W,handleUnLike:q})]})]}),Z&&Object(n.jsx)(B,{post:o,onReply:Z,setOnReply:J,children:Object(n.jsxs)(i.b,{to:"/profile/".concat(Z.user._id),className:"mr-1",children:["@",Z.user.username,":"]})}),t]})},X=function(e){var t=e.comment,a=e.post,r=e.replyCm,s=Object(c.useState)([]),o=Object(O.a)(s,2),i=o[0],u=o[1],l=Object(c.useState)(1),d=Object(O.a)(l,2),j=d[0],b=d[1];return Object(c.useEffect)((function(){u(r.slice(r.length-j))}),[r,j]),Object(n.jsx)("div",{className:"comment_display",children:Object(n.jsx)(Y,{comment:t,post:a,commentId:t._id,children:Object(n.jsxs)("div",{className:"pl-4",children:[i.map((function(e,c){return e.reply&&Object(n.jsx)(Y,{comment:e,post:a,commentId:t._id},c)})),r.length-j>0?Object(n.jsx)("div",{style:{cursor:"pointer",color:"crimson"},onClick:function(){return b(j+10)},children:"See more comments..."}):r.length>1&&Object(n.jsx)("div",{style:{cursor:"pointer",color:"crimson"},onClick:function(){return b(1)},children:"Hide comments..."})]})})})},V=function(e){var t=e.post,a=Object(c.useState)([]),r=Object(O.a)(a,2),s=r[0],o=r[1],i=Object(c.useState)([]),u=Object(O.a)(i,2),l=u[0],d=u[1],j=Object(c.useState)(2),b=Object(O.a)(j,2),p=b[0],f=b[1],m=Object(c.useState)([]),h=Object(O.a)(m,2),x=h[0],v=h[1];return Object(c.useEffect)((function(){var e=t.comments.filter((function(e){return!e.reply}));o(e),d(e.slice(e.length-p))}),[t.comments,p]),Object(c.useEffect)((function(){var e=t.comments.filter((function(e){return e.reply}));v(e)}),[t.comments]),Object(n.jsxs)("div",{className:"comments",children:[l.map((function(e,a){return Object(n.jsx)(X,{comment:e,post:t,replyCm:x.filter((function(t){return t.reply===e._id}))},a)})),s.length-p>0?Object(n.jsx)("div",{className:"p-2 border-top",style:{cursor:"pointer",color:"crimson"},onClick:function(){return f(p+10)},children:"See more comments..."}):s.length>2&&Object(n.jsx)("div",{className:"p-2 border-top",style:{cursor:"pointer",color:"crimson"},onClick:function(){return f(2)},children:"Hide comments..."})]})};t.a=function(e){var t=e.post,a=e.theme;return Object(n.jsxs)("div",{className:"card my-3",children:[Object(n.jsx)(f,{post:t}),Object(n.jsx)(h,{post:t,theme:a}),Object(n.jsx)(U,{post:t}),Object(n.jsx)(V,{post:t}),Object(n.jsx)(B,{post:t})]})}},function(e,t,a){"use strict";var n=a(0),c=a(4),r=a.n(c),s=a(7),o=a(6),i=a(1),u=a(64),l=a(40),d=a(2),j=a(5),b=a(23),p=a(3),f=a(18),O=function(e){var t=e.setAddGroup,a=Object(i.useState)({groupname:"",story:""}),c=Object(o.a)(a,2),r=c[0],s=c[1],u=r.groupname,O=r.story,m=Object(i.useState)(""),h=Object(o.a)(m,2),x=h[0],v=h[1],g=Object(j.c)((function(e){return e})),y=g.auth,E=g.theme,N=Object(j.b)(),w=function(e){var t=e.target,a=t.name,n=t.value;s(Object(d.a)(Object(d.a)({},r),{},Object(l.a)({},a,n)))};return Object(n.jsxs)("div",{className:"edit_profile",children:[Object(n.jsx)("button",{className:"btn btn-danger btn_close",onClick:function(){return t(!1)},children:"Close"}),Object(n.jsxs)("form",{onSubmit:function(e){e.preventDefault(),N(Object(f.d)({groupData:r,avatar:x,auth:y})),console.log("groupData",r)},children:[Object(n.jsxs)("div",{className:"info_avatar",children:[Object(n.jsx)("img",{src:x?URL.createObjectURL(x):"/public/images/".concat(y.user.avatar),alt:"avatar",style:{filter:E?"invert(1)":"invert(0)"}}),Object(n.jsxs)("span",{children:[Object(n.jsx)("i",{className:"fas fa-camera"}),Object(n.jsx)("p",{children:"Change"}),Object(n.jsx)("input",{type:"file",name:"file",id:"file_up",accept:"image/*",onChange:function(e){var t=e.target.files[0],a=Object(b.a)(t);if(a)return N({type:p.c.ALERT,payload:{error:a}});v(t)}})]})]}),Object(n.jsxs)("div",{className:"form-group",children:[Object(n.jsx)("label",{htmlFor:"groupname",children:"Group Name"}),Object(n.jsxs)("div",{className:"position-relative",children:[Object(n.jsx)("input",{type:"text",className:"form-control",id:"groupname",name:"groupname",value:u,onChange:w}),Object(n.jsxs)("small",{className:"text-danger position-absolute",style:{top:"50%",right:"5px",transform:"translateY(-50%)"},children:[u.length,"/25"]})]})]}),Object(n.jsxs)("div",{className:"form-group",children:[Object(n.jsx)("label",{htmlFor:"story",children:"Story"}),Object(n.jsx)("textarea",{name:"story",value:O,cols:"30",rows:"4",className:"form-control",onChange:w}),Object(n.jsxs)("small",{className:"text-danger d-block text-right",children:[O.length,"/200"]})]}),Object(n.jsx)("button",{className:"btn btn-info w-100",type:"submit",children:"Save"})]})]})},m=a(8),h=a(15);a(12),t.a=function(){var e=Object(j.c)((function(e){return e})),t=e.auth,a=e.groupmessage,c=(e.online,Object(j.b)()),l=Object(i.useState)(""),d=Object(o.a)(l,2),b=d[0],x=d[1],v=Object(i.useState)([]),g=Object(o.a)(v,2),y=g[0],E=g[1],N=Object(i.useState)(!1),w=Object(o.a)(N,2),k=w[0],_=w[1],S=Object(h.f)(),T=(Object(h.h)().id,Object(i.useRef)()),A=Object(i.useState)(0),L=Object(o.a)(A,2),C=(L[0],L[1]),D=function(){var e=Object(s.a)(r.a.mark((function e(a){var n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.preventDefault(),b){e.next=3;break}return e.abrupt("return",E([]));case 3:return e.prev=3,e.next=6,Object(m.b)("groupsearch?groupname=".concat(b),t.token);case 6:n=e.sent,E(n.data.groups),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(3),c({type:p.c.ALERT,payload:{error:e.t0.response.data.msg}});case 13:case"end":return e.stop()}}),e,null,[[3,10]])})));return function(t){return e.apply(this,arguments)}}(),R=function(e){return x(""),E([]),c(Object(f.b)({selectedgroup:e,groupmessage:a})),console.log("add group repeat"),S.push("/groupmessage/".concat(e._id))};return Object(i.useEffect)((function(){a.firstLoad||c(Object(f.f)({auth:t}))}),[c,t,a.firstLoad]),Object(i.useEffect)((function(){new IntersectionObserver((function(e){e[0].isIntersecting&&C((function(e){return e+1}))}),{threshold:.1}).observe(T.current)}),[C]),Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)("button",{className:"btn btn-outline-info",onClick:function(){return _(!0)},children:"Add Group"}),k&&Object(n.jsx)(O,{setAddGroup:_}),Object(n.jsxs)("form",{className:"gmessage_header",onSubmit:D,children:[Object(n.jsx)("input",{type:"text",value:b,placeholder:"Enter to Search...",onChange:function(e){return x(e.target.value)}}),Object(n.jsx)("button",{type:"submit",style:{display:"none"},children:"Search"})]}),Object(n.jsxs)("div",{className:"gmessage_chat_list",children:[0!==y.length?Object(n.jsx)(n.Fragment,{children:y.map((function(e){return Object(n.jsx)("div",{className:"gmessage_user",onClick:function(){return R(e)},children:Object(n.jsx)(u.a,{group:e})},e._id)}))}):Object(n.jsx)(n.Fragment,{children:a.groups.map((function(e){return Object(n.jsx)("div",{className:"gmessage_user ",onClick:function(){return R(e)},children:Object(n.jsx)(u.a,{group:e,msg:!0})},e._id)}))}),Object(n.jsx)("button",{ref:T,style:{opacity:0},children:"Load More"})]})]})}},,,,,,,function(e,t,a){"use strict";a.r(t);var n=a(0),c=a(4),r=a.n(c),s=a(7),o=a(6),i=a(1),u=a(5),l=a(52),d=a(16),j=a(56),b=a(47),p=a(8);t.default=function(){var e=Object(u.c)((function(e){return e})),t=e.auth,a=e.discover,c=Object(u.b)(),f=Object(i.useState)(!1),O=Object(o.a)(f,2),m=O[0],h=O[1];Object(i.useEffect)((function(){a.firstLoad||c(Object(l.b)(t.token))}),[c,t.token,a.firstLoad]);var x=function(){var e=Object(s.a)(r.a.mark((function e(){var n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return h(!0),e.next=3,Object(p.b)("post_discover?num=".concat(9*a.page),t.token);case 3:n=e.sent,c({type:l.a.UPDATE_POST,payload:n.data}),h(!1);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(n.jsxs)("div",{children:[a.loading?Object(n.jsx)("img",{src:d.a,alt:"loading",className:"d-block mx-auto my-4"}):Object(n.jsx)(j.a,{posts:a.posts,result:a.result}),m&&Object(n.jsx)("img",{src:d.a,alt:"loading",className:"d-block mx-auto"}),!a.loading&&Object(n.jsx)(b.a,{result:a.result,page:a.page,load:m,handleLoadMore:x})]})}},,,,,,,,,function(e,t,a){"use strict";a.r(t);var n=a(0),c=a(6),r=a(1),s=a(15),o=a(5),i=a(10),u=a(16),l=a(75);t.default=function(){var e=Object(s.h)().id,t=Object(r.useState)([]),a=Object(c.a)(t,2),d=a[0],j=a[1],b=Object(o.c)((function(e){return e})),p=b.auth,f=b.detailPost,O=Object(o.b)();return Object(r.useEffect)((function(){if(O(Object(i.d)({detailPost:f,id:e,auth:p})),f.length>0){var t=f.filter((function(t){return t._id===e}));j(t)}}),[f,O,e,p]),Object(n.jsxs)("div",{className:"posts",children:[0===d.length&&Object(n.jsx)("img",{src:u.a,alt:"loading",className:"d-block mx-auto my-4"}),d.map((function(e){return Object(n.jsx)(l.a,{post:e},e._id)}))]})}},function(e,t,a){"use strict";a.r(t);var n=a(0),c=a(6),r=a(1),s=a(17),o=a(40),i=a(2),u=a(5),l=a(23),d=a(3),j=a(22),b=function(e){var t=e.setOnEdit,a=Object(r.useState)({fullname:"",mobile:"",address:"",website:"",story:"",gender:""}),s=Object(c.a)(a,2),b=s[0],p=s[1],f=b.fullname,O=b.mobile,m=b.address,h=b.website,x=b.story,v=b.gender,g=Object(r.useState)(""),y=Object(c.a)(g,2),E=y[0],N=y[1],w=Object(u.c)((function(e){return e})),k=w.auth,_=w.theme,S=Object(u.b)();Object(r.useEffect)((function(){p(k.user)}),[k.user]);var T=function(e){var t=e.target,a=t.name,n=t.value;p(Object(i.a)(Object(i.a)({},b),{},Object(o.a)({},a,n)))};return Object(n.jsxs)("div",{className:"edit_profile",children:[Object(n.jsx)("button",{className:"btn btn-danger btn_close",onClick:function(){return t(!1)},children:"Close"}),Object(n.jsxs)("form",{onSubmit:function(e){e.preventDefault(),S(Object(j.e)({userData:b,avatar:E,auth:k}))},children:[Object(n.jsxs)("div",{className:"info_avatar",children:[Object(n.jsx)("img",{src:E?URL.createObjectURL(E):"/public/images/".concat(k.user.avatar),alt:"avatar",style:{filter:_?"invert(1)":"invert(0)"}}),Object(n.jsxs)("span",{children:[Object(n.jsx)("i",{className:"fas fa-camera"}),Object(n.jsx)("p",{children:"Change"}),Object(n.jsx)("input",{type:"file",name:"file",id:"file_up",accept:"image/*",onChange:function(e){var t=e.target.files[0],a=Object(l.a)(t);if(a)return S({type:d.c.ALERT,payload:{error:a}});N(t)}})]})]}),Object(n.jsxs)("div",{className:"form-group",children:[Object(n.jsx)("label",{htmlFor:"fullname",children:"Full Name"}),Object(n.jsxs)("div",{className:"position-relative",children:[Object(n.jsx)("input",{type:"text",className:"form-control",id:"fullname",name:"fullname",value:f,onChange:T}),Object(n.jsxs)("small",{className:"text-danger position-absolute",style:{top:"50%",right:"5px",transform:"translateY(-50%)"},children:[f.length,"/25"]})]})]}),Object(n.jsxs)("div",{className:"form-group",children:[Object(n.jsx)("label",{htmlFor:"mobile",children:"Mobile"}),Object(n.jsx)("input",{type:"text",name:"mobile",value:O,className:"form-control",onChange:T})]}),Object(n.jsxs)("div",{className:"form-group",children:[Object(n.jsx)("label",{htmlFor:"address",children:"Address"}),Object(n.jsx)("input",{type:"text",name:"address",value:m,className:"form-control",onChange:T})]}),Object(n.jsxs)("div",{className:"form-group",children:[Object(n.jsx)("label",{htmlFor:"website",children:"Website"}),Object(n.jsx)("input",{type:"text",name:"website",value:h,className:"form-control",onChange:T})]}),Object(n.jsxs)("div",{className:"form-group",children:[Object(n.jsx)("label",{htmlFor:"story",children:"Story"}),Object(n.jsx)("textarea",{name:"story",value:x,cols:"30",rows:"4",className:"form-control",onChange:T}),Object(n.jsxs)("small",{className:"text-danger d-block text-right",children:[x.length,"/200"]})]}),Object(n.jsx)("label",{htmlFor:"gender",children:"Gender"}),Object(n.jsx)("div",{className:"input-group-prepend px-0 mb-4",children:Object(n.jsxs)("select",{name:"gender",id:"gender",value:v,className:"custom-select text-capitalize",onChange:T,children:[Object(n.jsx)("option",{value:"male",children:"Male"}),Object(n.jsx)("option",{value:"female",children:"Female"}),Object(n.jsx)("option",{value:"other",children:"Other"})]})}),Object(n.jsx)("button",{className:"btn btn-info w-100",type:"submit",children:"Save"})]})]})},p=a(49),f=a(26),O=function(e){var t=e.users,a=e.setShowFollowers,c=Object(u.c)((function(e){return e})).auth;return Object(n.jsx)("div",{className:"follow",children:Object(n.jsxs)("div",{className:"follow_box",children:[Object(n.jsx)("h5",{className:"text-center",children:"Followers"}),Object(n.jsx)("hr",{}),Object(n.jsx)("div",{className:"follow_content",children:t.map((function(e){return Object(n.jsx)(f.a,{user:e,setShowFollowers:a,children:c.user._id!==e._id&&Object(n.jsx)(p.a,{user:e})},e._id)}))}),Object(n.jsx)("div",{className:"close",onClick:function(){return a(!1)},children:"\xd7"})]})})},m=function(e){var t=e.users,a=e.setShowFollowing,c=Object(u.c)((function(e){return e})).auth;return Object(n.jsx)("div",{className:"follow",children:Object(n.jsxs)("div",{className:"follow_box",children:[Object(n.jsx)("h5",{className:"text-center",children:"Following"}),Object(n.jsx)("hr",{}),Object(n.jsx)("div",{className:"follow_content",children:t.map((function(e){return Object(n.jsx)(f.a,{user:e,setShowFollowing:a,children:c.user._id!==e._id&&Object(n.jsx)(p.a,{user:e})},e._id)}))}),Object(n.jsx)("div",{className:"close",onClick:function(){return a(!1)},children:"\xd7"})]})})},h=function(e){var t=e.id,a=e.auth,o=e.profile,i=e.dispatch,u=Object(r.useState)([]),l=Object(c.a)(u,2),j=l[0],f=l[1],h=Object(r.useState)(!1),x=Object(c.a)(h,2),v=x[0],g=x[1],y=Object(r.useState)(!1),E=Object(c.a)(y,2),N=E[0],w=E[1],k=Object(r.useState)(!1),_=Object(c.a)(k,2),S=_[0],T=_[1];return Object(r.useEffect)((function(){if(t===a.user._id)f([a.user]);else{var e=o.users.filter((function(e){return e._id===t}));f(e)}}),[t,a,i,o.users]),Object(r.useEffect)((function(){i(N||S||v?{type:d.c.MODAL,payload:!0}:{type:d.c.MODAL,payload:!1})}),[N,S,v,i]),Object(n.jsx)("div",{className:"info",children:j.map((function(e){return Object(n.jsxs)("div",{className:"info_container",children:[Object(n.jsx)(s.a,{src:e.avatar,size:"supper-avatar"}),Object(n.jsxs)("div",{className:"info_content",children:[Object(n.jsxs)("div",{className:"info_content_title",children:[Object(n.jsx)("h2",{children:e.username}),e._id===a.user._id?Object(n.jsx)("button",{className:"btn btn-outline-info",onClick:function(){return g(!0)},children:"Edit Profile"}):Object(n.jsx)(p.a,{user:e})]}),Object(n.jsxs)("div",{className:"follow_btn",children:[Object(n.jsxs)("span",{className:"mr-4",onClick:function(){return w(!0)},children:[e.followers.length," Followers"]}),Object(n.jsxs)("span",{className:"ml-4",onClick:function(){return T(!0)},children:[e.following.length," Following"]})]}),Object(n.jsxs)("h6",{children:[e.fullname," ",Object(n.jsx)("span",{className:"text-danger",children:e.mobile})]}),Object(n.jsx)("p",{className:"m-0",children:e.address}),Object(n.jsx)("h6",{className:"m-0",children:e.email}),Object(n.jsx)("a",{href:e.website,target:"_blank",rel:"noreferrer",children:e.website}),Object(n.jsx)("p",{children:e.story})]}),v&&Object(n.jsx)(b,{setOnEdit:g}),N&&Object(n.jsx)(O,{users:e.followers,setShowFollowers:w}),S&&Object(n.jsx)(m,{users:e.following,setShowFollowing:T})]},e._id)}))})},x=a(4),v=a.n(x),g=a(7),y=a(56),E=a(16),N=a(47),w=a(8),k=function(e){var t=e.auth,a=e.id,s=e.dispatch,o=e.profile,u=Object(r.useState)([]),l=Object(c.a)(u,2),d=l[0],b=l[1],p=Object(r.useState)(9),f=Object(c.a)(p,2),O=f[0],m=f[1],h=Object(r.useState)(0),x=Object(c.a)(h,2),k=x[0],_=x[1],S=Object(r.useState)(!1),T=Object(c.a)(S,2),A=T[0],L=T[1];Object(r.useEffect)((function(){o.posts.forEach((function(e){e._id===a&&(b(e.posts),m(e.result),_(e.page))}))}),[o.posts,a]);var C=function(){var e=Object(g.a)(v.a.mark((function e(){var n,c;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return L(!0),e.next=3,Object(w.b)("user_posts/".concat(a,"?limit=").concat(9*k),t.token);case 3:n=e.sent,c=Object(i.a)(Object(i.a)({},n.data),{},{page:k+1,_id:a}),s({type:j.a.UPDATE_POST,payload:c}),L(!1);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(n.jsxs)("div",{children:[Object(n.jsx)(y.a,{posts:d,result:O}),A&&Object(n.jsx)("img",{src:E.a,alt:"loading",className:"d-block mx-auto"}),Object(n.jsx)(N.a,{result:O,page:k,load:A,handleLoadMore:C})]})},_=function(e){var t=e.auth,a=e.dispatch,s=Object(r.useState)([]),o=Object(c.a)(s,2),i=o[0],u=o[1],l=Object(r.useState)(9),j=Object(c.a)(l,2),b=j[0],p=j[1],f=Object(r.useState)(2),O=Object(c.a)(f,2),m=O[0],h=O[1],x=Object(r.useState)(!1),k=Object(c.a)(x,2),_=k[0],S=k[1];Object(r.useEffect)((function(){return S(!0),Object(w.b)("getSavePosts",t.token).then((function(e){u(e.data.savePosts),p(e.data.result),S(!1)})).catch((function(e){a({type:d.c.ALERT,payload:{error:e.response.data.msg}})})),function(){return u([])}}),[t.token,a]);var T=function(){var e=Object(g.a)(v.a.mark((function e(){var a;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return S(!0),e.next=3,Object(w.b)("getSavePosts?limit=".concat(9*m),t.token);case 3:a=e.sent,u(a.data.savePosts),p(a.data.result),h(m+1),S(!1);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(n.jsxs)("div",{children:[Object(n.jsx)(y.a,{posts:i,result:b}),_&&Object(n.jsx)("img",{src:E.a,alt:"loading",className:"d-block mx-auto"}),Object(n.jsx)(N.a,{result:b,page:m,load:_,handleLoadMore:T})]})},S=a(15);t.default=function(){var e=Object(u.c)((function(e){return e})),t=e.profile,a=e.auth,s=Object(u.b)(),o=Object(S.h)().id,i=Object(r.useState)(!1),l=Object(c.a)(i,2),d=l[0],b=l[1];return Object(r.useEffect)((function(){t.ids.every((function(e){return e!==o}))&&s(Object(j.c)({id:o,auth:a}))}),[o,a,s,t.ids]),Object(n.jsxs)("div",{className:"profile",children:[Object(n.jsx)(h,{auth:a,profile:t,dispatch:s,id:o}),a.user._id===o&&Object(n.jsxs)("div",{className:"profile_tab",children:[Object(n.jsx)("button",{className:d?"":"active",onClick:function(){return b(!1)},children:"Posts"}),Object(n.jsx)("button",{className:d?"active":"",onClick:function(){return b(!0)},children:"Saved"})]}),t.loading?Object(n.jsx)("img",{className:"d-block mx-auto",src:E.a,alt:"loading"}):Object(n.jsx)(n.Fragment,{children:d?Object(n.jsx)(_,{auth:a,dispatch:s}):Object(n.jsx)(k,{auth:a,profile:t,dispatch:s,id:o})})]})}},function(e,t,a){"use strict";a.r(t);var n=a(0),c=a(1),r=a(72),s=a(4),o=a.n(s),i=a(7),u=a(9),l=a(6),d=a(26),j=a(5),b=a(15),p=a(17),f=a(61),O=a(12),m=function(e){var t=e.total;return Object(n.jsxs)("div",{children:[Object(n.jsx)("span",{children:parseInt(t/3600).toString().length<2?"0"+parseInt(t/3600):parseInt(t/3600)}),Object(n.jsx)("span",{children:":"}),Object(n.jsx)("span",{children:parseInt(t/60).toString().length<2?"0"+parseInt(t/60):parseInt(t/60)}),Object(n.jsx)("span",{children:":"}),Object(n.jsx)("span",{children:(t%60).toString().length<2?"0"+t%60+"s":t%60+"s"})]})},h=function(e){var t=e.user,a=e.msg,c=e.theme,r=e.data,s=Object(j.c)((function(e){return e})).auth,o=Object(j.b)();return Object(n.jsxs)(n.Fragment,{children:[Object(n.jsxs)("div",{className:"chat_title",children:[Object(n.jsx)(p.a,{src:t.avatar,size:"small-avatar"}),Object(n.jsx)("span",{children:t.username})]}),Object(n.jsxs)("div",{className:"you_content",children:[t._id===s.user._id&&Object(n.jsx)("i",{className:"fas fa-trash text-danger",onClick:function(){r&&(console.log({msg:a,data:r}),window.confirm("Do you want to delete?")&&o(Object(O.d)({msg:a,data:r,auth:s})))}}),Object(n.jsxs)("div",{children:[a.text&&Object(n.jsx)("div",{className:"chat_text",style:{filter:c?"invert(1)":"invert(0)"},children:a.text}),a.media.map((function(e,t){return Object(n.jsx)("div",{children:e.url.match(/video/i)?Object(f.b)(e.url,c):Object(f.a)(e.url,c)},t)}))]}),a.call&&Object(n.jsxs)("button",{className:"btn d-flex align-items-center py-3",style:{background:"#eee",borderRadius:"10px"},children:[Object(n.jsx)("span",{className:"material-icons font-weight-bold mr-1",style:{fontSize:"2.5rem",color:0===a.call.times?"crimson":"green",filter:c?"invert(1)":"invert(0)"},children:0===a.call.times?a.call.video?"videocam_off":"phone_disabled":a.call.video?"video_camera_front":"call"}),Object(n.jsxs)("div",{className:"text-left",children:[Object(n.jsx)("h6",{children:a.call.video?"Video Call":"Audio Call"}),Object(n.jsx)("small",{children:a.call.times>0?Object(n.jsx)(m,{total:a.call.times}):new Date(a.createdAt).toLocaleTimeString()})]})]})]}),Object(n.jsx)("div",{className:"chat_time",children:new Date(a.createdAt).toLocaleString()})]})},x=a(48),v=a(3),g=a(38),y=a(23),E=a(16),N=function(){var e=Object(j.c)((function(e){return e})),t=e.auth,a=e.message,r=e.theme,s=e.socket,p=e.peer,f=Object(j.b)(),m=Object(b.h)().id,N=Object(c.useState)([]),w=Object(l.a)(N,2),k=w[0],_=w[1],S=Object(c.useState)(""),T=Object(l.a)(S,2),A=T[0],L=T[1],C=Object(c.useState)([]),D=Object(l.a)(C,2),R=D[0],P=D[1],I=Object(c.useState)(!1),U=Object(l.a)(I,2),G=U[0],F=U[1],M=Object(c.useRef)(),H=Object(c.useRef)(),Q=Object(c.useState)([]),z=Object(l.a)(Q,2),K=z[0],B=z[1],Y=Object(c.useState)(9),X=Object(l.a)(Y,2),V=X[0],Z=X[1],J=Object(c.useState)(0),W=Object(l.a)(J,2),q=W[0],$=W[1],ee=Object(c.useState)(0),te=Object(l.a)(ee,2),ae=te[0],ne=te[1],ce=Object(b.f)();Object(c.useEffect)((function(){var e=a.data.find((function(e){return e._id===m}));e&&(B(e.messages),Z(e.result),$(e.page))}),[a.data,m]),Object(c.useEffect)((function(){if(m&&a.users.length>0){setTimeout((function(){M.current.scrollIntoView({behavior:"smooth",block:"end"})}),50);var e=a.users.find((function(e){return e._id===m}));e&&_(e)}}),[a.users,m]);var re=function(){var e=Object(i.a)(o.a.mark((function e(a){var n,c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.preventDefault(),A.trim()||0!==R.length){e.next=3;break}return e.abrupt("return");case 3:if(L(""),P([]),F(!0),n=[],!(R.length>0)){e.next=11;break}return e.next=10,Object(y.c)(R);case 10:n=e.sent;case 11:return c={sender:t.user._id,recipient:m,text:A,media:n,createdAt:(new Date).toISOString()},F(!1),e.next=15,f(Object(O.b)({msg:c,auth:t,socket:s}));case 15:M.current&&M.current.scrollIntoView({behavior:"smooth",block:"end"});case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(c.useEffect)((function(){(function(){var e=Object(i.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!a.data.every((function(e){return e._id!==m}))){e.next=4;break}return e.next=3,f(Object(O.f)({auth:t,id:m}));case 3:setTimeout((function(){M.current.scrollIntoView({behavior:"smooth",block:"end"})}),50);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[m,f,t,a.data]),Object(c.useEffect)((function(){new IntersectionObserver((function(e){e[0].isIntersecting&&ne((function(e){return e+1}))}),{threshold:.1}).observe(H.current)}),[ne]),Object(c.useEffect)((function(){ae>1&&V>=9*q&&(f(Object(O.g)({auth:t,id:m,page:q+1})),ne(1))}),[ae]);var se=function(e){var a=e.video,n=k._id,c=k.avatar,r=k.username,s=k.fullname,o={sender:t.user._id,recipient:n,avatar:c,username:r,fullname:s,video:a};f({type:v.c.CALL,payload:o})},oe=function(e){var a=e.video,n=t.user,c=n._id,r=n.avatar,o=n.username,i=n.fullname,u={sender:c,recipient:k._id,avatar:r,username:o,fullname:i,video:a};p.open&&(u.peerId=p._id),s.emit("callUser",u)};return Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)("div",{className:"message_header",style:{cursor:"pointer"},children:0!==k.length&&Object(n.jsx)(d.a,{user:k,children:Object(n.jsxs)("div",{children:[Object(n.jsx)("i",{className:"fas fa-phone-alt",onClick:function(){se({video:!1}),oe({video:!1})}}),Object(n.jsx)("i",{className:"fas fa-video mx-3",onClick:function(){se({video:!0}),oe({video:!0})}}),Object(n.jsx)("i",{className:"fas fa-trash text-danger",onClick:function(){if(window.confirm("Do you want to delete?"))return f(Object(O.c)({auth:t,id:m})),ce.push("/message")}})]})})}),Object(n.jsx)("div",{className:"chat_container",style:{height:R.length>0?"calc(100% - 180px)":""},children:Object(n.jsxs)("div",{className:"chat_display",ref:M,children:[Object(n.jsx)("button",{style:{marginTop:"-25px",opacity:0},ref:H,children:"Load more"}),K.map((function(e,a){return Object(n.jsxs)("div",{children:[e.sender!==t.user._id&&Object(n.jsx)("div",{className:"chat_row other_message",children:Object(n.jsx)(h,{user:k,msg:e,theme:r})}),e.sender===t.user._id&&Object(n.jsx)("div",{className:"chat_row you_message",children:Object(n.jsx)(h,{user:t.user,msg:e,theme:r,data:K})})]},a)})),G&&Object(n.jsx)("div",{className:"chat_row you_message",children:Object(n.jsx)("img",{src:E.a,alt:"loading"})})]})}),Object(n.jsx)("div",{className:"show_media",style:{display:R.length>0?"grid":"none"},children:R.map((function(e,t){return Object(n.jsxs)("div",{id:"file_media",children:[e.type.match(/video/i)?Object(g.b)(URL.createObjectURL(e),r):Object(g.a)(URL.createObjectURL(e),r),Object(n.jsx)("span",{onClick:function(){return function(e){var t=Object(u.a)(R);t.splice(e,1),P(t)}(t)},children:"\xd7"})]},t)}))}),Object(n.jsxs)("form",{className:"chat_input",onSubmit:re,children:[Object(n.jsx)("input",{type:"text",placeholder:"Enter you message...",value:A,onChange:function(e){return L(e.target.value)},style:{filter:r?"invert(1)":"invert(0)",background:r?"#040404":"",color:r?"white":""}}),Object(n.jsx)(x.a,{setContent:L,content:A,theme:r}),Object(n.jsxs)("div",{className:"file_upload",children:[Object(n.jsx)("i",{className:"fas fa-image text-danger"}),Object(n.jsx)("input",{type:"file",name:"file",id:"file",multiple:!0,accept:"image/*,video/*",onChange:function(e){var t=Object(u.a)(e.target.files),a="",n=[];t.forEach((function(e){return e?e.size>104857600?a="The image/video largest is 100mb.":n.push(e):a="File does not exist."})),a&&f({type:v.c.ALERT,payload:{error:a}}),P([].concat(Object(u.a)(R),n))}})]}),Object(n.jsx)("button",{type:"submit",className:"material-icons",disabled:!(A||R.length>0),children:"near_me"})]})]})};t.default=function(){return Object(n.jsxs)("div",{className:"message d-flex",children:[Object(n.jsx)("div",{className:"col-md-4 border-right px-0 left_mess",children:Object(n.jsx)(r.a,{})}),Object(n.jsx)("div",{className:"col-md-8 px-0",children:Object(n.jsx)(N,{})})]})}},function(e,t,a){"use strict";a.r(t);var n=a(0),c=a(1),r=a(76),s=a(4),o=a.n(s),i=a(7),u=a(9),l=a(6),d=a(64),j=a(5),b=a(15),p=a(17),f=a(61),O=a(18),m=function(e){var t=e.user,a=e.msg,c=e.theme,r=e.data,s=Object(j.c)((function(e){return e})).auth,o=Object(j.b)();return Object(n.jsxs)(n.Fragment,{children:[Object(n.jsxs)("div",{className:"chat_title",children:[Object(n.jsx)(p.a,{src:t.avatar,size:"small-avatar"}),Object(n.jsx)("span",{children:t.username})]}),Object(n.jsxs)("div",{className:"you_content",children:[t._id===s.user._id&&Object(n.jsx)("i",{className:"fas fa-trash text-danger",onClick:function(){r&&(console.log({msg:a,data:r}),window.confirm("Do you want to delete?")&&o(Object(O.e)({msg:a,data:r,auth:s})))}}),Object(n.jsxs)("div",{children:[a.text&&Object(n.jsx)("div",{className:"chat_text",style:{filter:c?"invert(1)":"invert(0)"},children:a.text}),a.media.map((function(e,t){return Object(n.jsx)("div",{children:e.url.match(/video/i)?Object(f.b)(e.url,c):Object(f.a)(e.url,c)},t)}))]})]}),Object(n.jsx)("div",{className:"chat_time",children:new Date(a.createdAt).toLocaleString()})]})},h=a(48),x=a(3),v=a(38),g=a(23),y=a(12),E=a(16),N=function(){var e=Object(j.c)((function(e){return e})),t=e.auth,a=e.groupmessage,r=e.theme,s=e.socket,p=Object(j.b)(),f=Object(b.h)().id,N=Object(c.useState)([]),w=Object(l.a)(N,2),k=(w[0],w[1],Object(c.useState)([])),_=Object(l.a)(k,2),S=_[0],T=_[1],A=Object(c.useState)(""),L=Object(l.a)(A,2),C=L[0],D=L[1],R=Object(c.useState)([]),P=Object(l.a)(R,2),I=P[0],U=P[1],G=Object(c.useState)(!1),F=Object(l.a)(G,2),M=F[0],H=F[1],Q=Object(c.useRef)(),z=Object(c.useRef)(),K=Object(c.useState)([]),B=Object(l.a)(K,2),Y=B[0],X=B[1],V=Object(c.useState)(9),Z=Object(l.a)(V,2),J=Z[0],W=Z[1],q=Object(c.useState)(0),$=Object(l.a)(q,2),ee=$[0],te=$[1],ae=Object(c.useState)(0),ne=Object(l.a)(ae,2),ce=ne[0],re=ne[1],se=Object(b.f)();Object(c.useEffect)((function(){var e=a.data.find((function(e){return e._id===f}));e&&(X(e.groupmessages),W(e.result),te(e.page))}),[a.data,f]),Object(c.useEffect)((function(){if(f&&a.groups.length>0){setTimeout((function(){Q.current.scrollIntoView({behavior:"smooth",block:"end"})}),50);var e=a.groups.find((function(e){return e._id===f}));e&&T(e),console.log("group",e)}}),[a.groups,f]);var oe=function(){var e=Object(i.a)(o.a.mark((function e(a){var n,c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.preventDefault(),C.trim()||0!==I.length){e.next=3;break}return e.abrupt("return");case 3:if(D(""),U([]),H(!0),n=[],!(I.length>0)){e.next=11;break}return e.next=10,Object(g.c)(I);case 10:n=e.sent;case 11:return c={recipient:f,sender:t.user,text:C,media:n,createdAt:(new Date).toISOString()},H(!1),e.next=15,p(Object(O.c)({msg:c,auth:t,socket:s,id:f}));case 15:Q.current&&Q.current.scrollIntoView({behavior:"smooth",block:"end"});case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(c.useEffect)((function(){(function(){var e=Object(i.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!a.data.every((function(e){return e._id!==f}))){e.next=5;break}return e.next=3,p(Object(O.g)({auth:t,id:f}));case 3:console.log("repeat"),setTimeout((function(){Q.current.scrollIntoView({behavior:"smooth",block:"end"})}),50);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[f,p,t,a.data]),Object(c.useEffect)((function(){new IntersectionObserver((function(e){e[0].isIntersecting&&re((function(e){return e+1}))}),{threshold:.1}).observe(z.current)}),[re]),Object(c.useEffect)((function(){ce>1&&J>=9*ee&&(p(Object(O.h)({auth:t,id:f,page:ee+1})),re(1))}),[ce]),Object(c.useEffect)((function(){s.emit("join_room",f),console.log("socket")}),[f]);return Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)("div",{className:"message_header",style:{cursor:"pointer"},children:0!==S.length&&Object(n.jsx)(d.a,{group:S,msg:!0,children:Object(n.jsx)("div",{children:Object(n.jsx)("i",{className:"fas fa-trash text-danger",onClick:function(){if(window.confirm("Do you want to delete?"))return p(Object(y.c)({auth:t,id:f})),se.push("/message")}})})})}),Object(n.jsx)("div",{className:"chat_container",style:{height:I.length>0?"calc(100% - 180px)":""},children:Object(n.jsxs)("div",{className:"chat_display",ref:Q,children:[Object(n.jsx)("button",{style:{marginTop:"-25px",opacity:0},ref:z,children:"Load more"}),Y.map((function(e,a){return Object(n.jsxs)("div",{children:[e.sender._id!==t.user._id&&Object(n.jsx)("div",{className:"chat_row other_message",children:Object(n.jsx)(m,{user:e.sender,msg:e,theme:r})}),e.sender._id===t.user._id&&Object(n.jsx)("div",{className:"chat_row you_message",children:Object(n.jsx)(m,{user:t.user,msg:e,theme:r,data:Y})})]},a)})),M&&Object(n.jsx)("div",{className:"chat_row you_message",children:Object(n.jsx)("img",{src:E.a,alt:"loading"})})]})}),Object(n.jsx)("div",{className:"show_media",style:{display:I.length>0?"grid":"none"},children:I.map((function(e,t){return Object(n.jsxs)("div",{id:"file_media",children:[e.type.match(/video/i)?Object(v.b)(URL.createObjectURL(e),r):Object(v.a)(URL.createObjectURL(e),r),Object(n.jsx)("span",{onClick:function(){return function(e){var t=Object(u.a)(I);t.splice(e,1),U(t)}(t)},children:"\xd7"})]},t)}))}),Object(n.jsxs)("form",{className:"chat_input",onSubmit:oe,children:[Object(n.jsx)("input",{type:"text",placeholder:"Enter you message...",value:C,onChange:function(e){return D(e.target.value)},style:{filter:r?"invert(1)":"invert(0)",background:r?"#040404":"",color:r?"white":""}}),Object(n.jsx)(h.a,{setContent:D,content:C,theme:r}),Object(n.jsxs)("div",{className:"file_upload",children:[Object(n.jsx)("i",{className:"fas fa-image text-danger"}),Object(n.jsx)("input",{type:"file",name:"file",id:"file",multiple:!0,accept:"image/*,video/*",onChange:function(e){var t=Object(u.a)(e.target.files),a="",n=[];t.forEach((function(e){return e?e.size>104857600?a="The image/video largest is 100mb.":n.push(e):a="File does not exist."})),a&&p({type:x.c.ALERT,payload:{error:a}}),U([].concat(Object(u.a)(I),n))}})]}),Object(n.jsx)("button",{type:"submit",className:"material-icons",disabled:!(C||I.length>0),children:"near_me"})]})]})};t.default=function(){return Object(n.jsxs)("div",{className:"message d-flex",children:[Object(n.jsx)("div",{className:"col-md-4 border-right px-0 left_mess",children:Object(n.jsx)(r.a,{})}),Object(n.jsx)("div",{className:"col-md-8 px-0",children:Object(n.jsx)(N,{})})]})}},,,,,,,,,,,,,function(e,t,a){},,,,,function(e,t,a){var n={"./discover":83,"./discover.js":83,"./groupmessage":65,"./groupmessage/":65,"./groupmessage/[id]":95,"./groupmessage/[id].js":95,"./groupmessage/index":65,"./groupmessage/index.js":65,"./home":71,"./home.js":71,"./login":69,"./login.js":69,"./message":66,"./message/":66,"./message/[id]":94,"./message/[id].js":94,"./message/index":66,"./message/index.js":66,"./post/[id]":92,"./post/[id].js":92,"./profile/[id]":93,"./profile/[id].js":93,"./register":70,"./register.js":70};function c(e){var t=r(e);return a(t)}function r(e){if(!a.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}c.keys=function(){return Object.keys(n)},c.resolve=r,e.exports=c,c.id=113},,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t){function a(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}a.keys=function(){return[]},a.resolve=a,e.exports=a,a.id=139},function(e,t,a){"use strict";a.r(t);var n=a(0),c=a(1),r=a.n(c),s=a(67),o=a.n(s),i=(a(108),a(11)),u=a(15),l=function(){return Object(n.jsx)("div",{className:"position-relative",style:{minHeight:"calc(100vh - 70px)"},children:Object(n.jsx)("h2",{className:"position-absolute text-secondary",style:{top:"50%",left:"50%",transform:"translate(-50%, -50%)"},children:"404 | Not Found."})})},d=a(5),j=function(){var e=Object(u.h)(),t=e.page,c=e.id,s="";return Object(d.c)((function(e){return e})).auth.token&&(s=c?"".concat(t,"/[id]"):"".concat(t)),function(e){try{return r.a.createElement(a(113)("./".concat(e)).default)}catch(t){return Object(n.jsx)(l,{})}}(s)},b=a(2),p=function(e){return localStorage.getItem("firstLogin")?Object(n.jsx)(u.b,Object(b.a)({},e)):Object(n.jsx)(u.a,{to:"/"})},f=a(71),O=a(69),m=a(70),h=a(3),x=function(){return Object(n.jsx)("div",{className:"position-fixed w-100 h-100 text-center loading",style:{background:"#0008",color:"white",top:0,left:0,zIndex:50},children:Object(n.jsxs)("svg",{width:"205",height:"250",viewBox:"0 0 40 50",children:[Object(n.jsx)("polygon",{stroke:"#fff",strokeWidth:"1",fill:"none",points:"20,1 40,40 1,40"}),Object(n.jsx)("text",{fill:"#fff",x:"5",y:"47",children:"Loading"})]})})},v=function(e){var t=e.msg,a=e.handleShow,c=e.bgColor;return Object(n.jsxs)("div",{className:"toast show position-fixed text-light ".concat(c),style:{top:"5px",right:"5px",minWidth:"200px",zIndex:50},children:[Object(n.jsxs)("div",{className:"toast-header text-light ".concat(c),children:[Object(n.jsx)("strong",{className:"mr-auto text-light",children:t.title}),Object(n.jsx)("button",{className:"ml-2 mb-1 close text-light","data-dismiss":"toast",style:{outline:"none"},onClick:a,children:"\xd7"})]}),Object(n.jsx)("div",{className:"toast-body",children:t.body})]})},g=function(){var e=Object(d.c)((function(e){return e})).alert,t=Object(d.b)();return Object(n.jsxs)("div",{children:[e.loading&&Object(n.jsx)(x,{}),e.error&&Object(n.jsx)(v,{msg:{title:"Error",body:e.error},handleShow:function(){return t({type:h.c.ALERT,payload:{}})},bgColor:"bg-danger"}),e.success&&Object(n.jsx)(v,{msg:{title:"Success",body:e.success},handleShow:function(){return t({type:h.c.ALERT,payload:{}})},bgColor:"bg-success"})]})},y=a(50),E=a(17),N=a(57),w=a.n(N),k=a(13),_=function(){var e=Object(d.c)((function(e){return e})),t=e.auth,a=e.notify,c=Object(d.b)(),r=function(){c({type:k.a.UPDATE_SOUND,payload:!a.sound})};return Object(n.jsxs)("div",{style:{minWidth:"300px"},children:[Object(n.jsxs)("div",{className:"d-flex justify-content-between align-items-center px-3",children:[Object(n.jsx)("h3",{children:"Notification"}),a.sound?Object(n.jsx)("i",{className:"fas fa-bell text-danger",style:{fontSize:"1.2rem",cursor:"pointer"},onClick:r}):Object(n.jsx)("i",{className:"fas fa-bell-slash text-danger",style:{fontSize:"1.2rem",cursor:"pointer"},onClick:r})]}),Object(n.jsx)("hr",{className:"mt-0"}),0===a.data.length&&Object(n.jsx)("img",{src:"data:image/png;base64,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",alt:"NoNotice",className:"w-100"}),Object(n.jsx)("div",{style:{maxHeight:"calc(100vh - 200px)",overflow:"auto"},children:a.data.map((function(e,a){return Object(n.jsxs)("div",{className:"px-2 mb-3",children:[Object(n.jsxs)(i.b,{to:"".concat(e.url),className:"d-flex text-dark align-items-center",onClick:function(){return function(e){c(Object(k.e)({msg:e,auth:t}))}(e)},children:[Object(n.jsx)(E.a,{src:e.user.avatar,size:"big-avatar"}),Object(n.jsxs)("div",{className:"mx-1 flex-fill",children:[Object(n.jsxs)("div",{children:[Object(n.jsx)("strong",{className:"mr-1",children:e.user.username}),Object(n.jsx)("span",{children:e.text})]}),e.content&&Object(n.jsxs)("small",{children:[e.content.slice(0,20),"..."]})]}),e.image&&Object(n.jsx)("div",{style:{width:"30px"},children:e.image.match(/video/i)?Object(n.jsx)("video",{src:e.image,width:"100%"}):Object(n.jsx)(E.a,{src:e.image,size:"medium-avatar"})})]}),Object(n.jsxs)("small",{className:"text-muted d-flex justify-content-between px-2",children:[w()(e.createdAt).fromNow(),!e.isRead&&Object(n.jsx)("i",{className:"fas fa-circle text-primary"})]})]},a)}))}),Object(n.jsx)("hr",{className:"my-1"}),Object(n.jsx)("div",{className:"text-right text-danger mr-2",style:{cursor:"pointer"},onClick:function(){var e=a.data.filter((function(e){return!1===e.isRead}));return 0===e.length||window.confirm("You have ".concat(e.length," unread notices. Are you sure you want to delete all?"))?c(Object(k.c)(t.token)):void 0},children:"Delete All"})]})},S=function(){var e=Object(d.c)((function(e){return e})),t=e.auth,a=e.theme,c=e.notify,r=Object(d.b)(),s=Object(u.g)().pathname,o=function(e){if(e===s)return"active"};return Object(n.jsx)("div",{className:"menu",children:Object(n.jsxs)("ul",{className:"navbar-nav flex-row",children:[[{label:"Home",icon:"home",path:"/"},{label:"Message",icon:"near_me",path:"/message"},{label:"Discover",icon:"explore",path:"/discover"},{label:"Group",icon:"near_me",path:"/groupmessage"}].map((function(e,t){return Object(n.jsx)("li",{className:"nav-item px-2 ".concat(o(e.path)),children:Object(n.jsx)(i.b,{className:"nav-link",to:e.path,children:Object(n.jsx)("span",{className:"material-icons",children:e.icon})})},t)})),Object(n.jsxs)("li",{className:"nav-item dropdown",style:{opacity:1},children:[Object(n.jsxs)("span",{className:"nav-link position-relative",id:"navbarDropdown",role:"button","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false",children:[Object(n.jsx)("span",{className:"material-icons",style:{color:c.data.length>0?"crimson":""},children:"favorite"}),Object(n.jsx)("span",{className:"notify_length",children:c.data.length})]}),Object(n.jsx)("div",{className:"dropdown-menu","aria-labelledby":"navbarDropdown",style:{transform:"translateX(75px)"},children:Object(n.jsx)(_,{})})]}),Object(n.jsxs)("li",{className:"nav-item dropdown",style:{opacity:1},children:[Object(n.jsx)("span",{className:"nav-link dropdown-toggle",id:"navbarDropdown",role:"button","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false",children:Object(n.jsx)(E.a,{src:t.user.avatar,size:"medium-avatar"})}),Object(n.jsxs)("div",{className:"dropdown-menu","aria-labelledby":"navbarDropdown",children:[Object(n.jsx)(i.b,{className:"dropdown-item",to:"/profile/".concat(t.user._id),children:"Profile"}),Object(n.jsx)("label",{htmlFor:"theme",className:"dropdown-item",onClick:function(){return r({type:h.c.THEME,payload:!a})},children:a?"Light mode":"Dark mode"}),Object(n.jsx)("div",{className:"dropdown-divider"}),Object(n.jsx)(i.b,{className:"dropdown-item",to:"/",onClick:function(){return r(Object(y.b)())},children:"Logout"})]})]})]})})},T=a(4),A=a.n(T),L=a(7),C=a(6),D=a(8),R=a(26),P=a(16),I=function(){var e=Object(c.useState)(""),t=Object(C.a)(e,2),a=t[0],r=t[1],s=Object(c.useState)([]),o=Object(C.a)(s,2),i=o[0],u=o[1],l=Object(d.c)((function(e){return e})).auth,j=Object(d.b)(),b=Object(c.useState)(!1),p=Object(C.a)(b,2),f=p[0],O=p[1],m=function(){var e=Object(L.a)(A.a.mark((function e(t){var n;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),a){e.next=3;break}return e.abrupt("return");case 3:return e.prev=3,O(!0),e.next=7,Object(D.b)("search?username=".concat(a),l.token);case 7:n=e.sent,u(n.data.users),O(!1),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(3),j({type:h.c.ALERT,payload:{error:e.t0.response.data.msg}});case 15:case"end":return e.stop()}}),e,null,[[3,12]])})));return function(t){return e.apply(this,arguments)}}(),x=function(){r(""),u([])};return Object(n.jsxs)("form",{className:"search_form",onSubmit:m,children:[Object(n.jsx)("input",{type:"text",name:"search",value:a,id:"search",title:"Enter to Search",onChange:function(e){return r(e.target.value.toLowerCase().replace(/ /g,""))}}),Object(n.jsxs)("div",{className:"search_icon",style:{opacity:a?0:.3},children:[Object(n.jsx)("span",{className:"material-icons",children:"search"}),Object(n.jsx)("span",{children:"Enter to Search"})]}),Object(n.jsx)("div",{className:"close_search",onClick:x,style:{opacity:0===i.length?0:1},children:"\xd7"}),Object(n.jsx)("button",{type:"submit",style:{display:"none"},children:"Search"}),f&&Object(n.jsx)("img",{className:"loading",src:P.a,alt:"loading"}),Object(n.jsx)("div",{className:"users",children:a&&i.map((function(e){return Object(n.jsx)(R.a,{user:e,border:"border",handleClose:x},e._id)}))})]})},U=function(){return Object(n.jsx)("div",{className:"header bg-light",children:Object(n.jsxs)("nav",{className:"navbar navbar-expand-lg navbar-light  bg-light justify-content-between align-middle",children:[Object(n.jsx)(i.b,{to:"/",className:"logo",children:Object(n.jsxs)("h1",{className:"navbar-brand text-uppercase p-0 m-0",onClick:function(){return window.scrollTo({top:0})},children:["R-Network",Object(n.jsxs)("p",{children:[" ","E : ",Object(n.jsx)("b",{children:"production"})]})]})}),Object(n.jsx)(I,{}),Object(n.jsx)(S,{})]})})},G=a(9),F=a(10),M=a(48),H=a(38),Q=function(){var e=Object(d.c)((function(e){return e})),t=e.auth,a=e.theme,r=e.status,s=e.socket,o=Object(d.b)(),i=Object(c.useState)(""),u=Object(C.a)(i,2),l=u[0],j=u[1],b=Object(c.useState)([]),p=Object(C.a)(b,2),f=p[0],O=p[1],m=Object(c.useState)(!1),x=Object(C.a)(m,2),v=x[0],g=x[1],y=Object(c.useRef)(),E=Object(c.useRef)(),N=Object(c.useState)(""),w=Object(C.a)(N,2),k=w[0],_=w[1];return Object(c.useEffect)((function(){r.onEdit&&(j(r.content),O(r.images))}),[r]),Object(n.jsx)("div",{className:"status_modal",children:Object(n.jsxs)("form",{onSubmit:function(e){if(e.preventDefault(),0===f.length)return o({type:h.c.ALERT,payload:{error:"Please add your photo."}});r.onEdit?o(Object(F.j)({content:l,images:f,auth:t,status:r})):o(Object(F.b)({content:l,images:f,auth:t,socket:s})),j(""),O([]),k&&k.stop(),o({type:h.c.STATUS,payload:!1})},children:[Object(n.jsxs)("div",{className:"status_header",children:[Object(n.jsx)("h5",{className:"m-0",children:"Create Post"}),Object(n.jsx)("span",{onClick:function(){return o({type:h.c.STATUS,payload:!1})},children:"\xd7"})]}),Object(n.jsxs)("div",{className:"status_body",children:[Object(n.jsx)("textarea",{name:"content",value:l,placeholder:"".concat(t.user.username,", what are you thinking?"),onChange:function(e){return j(e.target.value)},style:{filter:a?"invert(1)":"invert(0)",color:a?"white":"#111",background:a?"rgba(0,0,0,.03)":""}}),Object(n.jsxs)("div",{className:"d-flex",children:[Object(n.jsx)("div",{className:"flex-fill"}),Object(n.jsx)(M.a,{setContent:j,content:l,theme:a})]}),Object(n.jsx)("div",{className:"show_images",children:f.map((function(e,t){return Object(n.jsxs)("div",{id:"file_img",children:[e.camera?Object(H.a)(e.camera,a):e.url?Object(n.jsx)(n.Fragment,{children:e.url.match(/video/i)?Object(H.b)(e.url,a):Object(H.a)(e.url,a)}):Object(n.jsx)(n.Fragment,{children:e.type.match(/video/i)?Object(H.b)(URL.createObjectURL(e),a):Object(H.a)(URL.createObjectURL(e),a)}),Object(n.jsx)("span",{onClick:function(){return function(e){var t=Object(G.a)(f);t.splice(e,1),O(t)}(t)},children:"\xd7"})]},t)}))}),v&&Object(n.jsxs)("div",{className:"stream position-relative",children:[Object(n.jsx)("video",{autoPlay:!0,muted:!0,ref:y,width:"100%",height:"100%",style:{filter:a?"invert(1)":"invert(0)"}}),Object(n.jsx)("span",{onClick:function(){k.stop(),g(!1)},children:"\xd7"}),Object(n.jsx)("canvas",{ref:E,style:{display:"none"}})]}),Object(n.jsx)("div",{className:"input_images",children:v?Object(n.jsx)("i",{className:"fas fa-camera",onClick:function(){var e=y.current.clientWidth,t=y.current.clientHeight;E.current.setAttribute("width",e),E.current.setAttribute("height",t),E.current.getContext("2d").drawImage(y.current,0,0,e,t);var a=E.current.toDataURL();O([].concat(Object(G.a)(f),[{camera:a}]))}}):Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)("i",{className:"fas fa-camera",onClick:function(){g(!0),navigator.mediaDevices&&navigator.mediaDevices.getUserMedia&&navigator.mediaDevices.getUserMedia({video:!0}).then((function(e){y.current.srcObject=e,y.current.play();var t=e.getTracks();_(t[0])})).catch((function(e){return console.log(e)}))}}),Object(n.jsxs)("div",{className:"file_upload",children:[Object(n.jsx)("i",{className:"fas fa-image"}),Object(n.jsx)("input",{type:"file",name:"file",id:"file",multiple:!0,accept:"image/*,video/*",onChange:function(e){var t=Object(G.a)(e.target.files),a="",n=[];t.forEach((function(e){return e?e.size>209715200?a="The image/video largest is 200mb.":n.push(e):a="File does not exist."})),a&&o({type:h.c.ALERT,payload:{error:a}}),O([].concat(Object(G.a)(f),n))}})]})]})})]}),Object(n.jsx)("div",{className:"status_footer",children:Object(n.jsx)("button",{className:"btn btn-secondary w-100",type:"submit",children:"Post"})})]})})},z=a(51),K=a(102),B=a(12),Y=a(18),X=a.p+"static/media/got-it-done-613.89a311f0.mp3",V=function(){var e=Object(d.c)((function(e){return e})),t=e.auth,a=e.socket,r=e.notify,s=e.online,o=e.call,i=Object(d.b)(),u=Object(c.useRef)();return Object(c.useEffect)((function(){a.emit("joinUser",t.user)}),[a,t.user]),Object(c.useEffect)((function(){return a.on("likeToClient",(function(e){i({type:F.a.UPDATE_POST,payload:e})})),function(){return a.off("likeToClient")}}),[a,i]),Object(c.useEffect)((function(){return a.on("unLikeToClient",(function(e){i({type:F.a.UPDATE_POST,payload:e})})),function(){return a.off("unLikeToClient")}}),[a,i]),Object(c.useEffect)((function(){return a.on("createCommentToClient",(function(e){i({type:F.a.UPDATE_POST,payload:e})})),function(){return a.off("createCommentToClient")}}),[a,i]),Object(c.useEffect)((function(){return a.on("deleteCommentToClient",(function(e){i({type:F.a.UPDATE_POST,payload:e})})),function(){return a.off("deleteCommentToClient")}}),[a,i]),Object(c.useEffect)((function(){return a.on("followToClient",(function(e){i({type:h.c.AUTH,payload:Object(b.a)(Object(b.a)({},t),{},{user:e})})})),function(){return a.off("followToClient")}}),[a,i,t]),Object(c.useEffect)((function(){return a.on("unFollowToClient",(function(e){i({type:h.c.AUTH,payload:Object(b.a)(Object(b.a)({},t),{},{user:e})})})),function(){return a.off("unFollowToClient")}}),[a,i,t]),Object(c.useEffect)((function(){return a.on("createNotifyToClient",(function(e){var t,a,n;i({type:k.a.CREATE_NOTIFY,payload:e}),r.sound&&u.current.play(),t=e.user.username+" "+e.text,a=e.user.avatar,n=e.url,new Notification("V-NETWORK",{body:t,icon:a}).onclick=function(e){e.preventDefault(),window.open(n,"_blank")}})),function(){return a.off("createNotifyToClient")}}),[a,i,r.sound]),Object(c.useEffect)((function(){return a.on("removeNotifyToClient",(function(e){i({type:k.a.REMOVE_NOTIFY,payload:e})})),function(){return a.off("removeNotifyToClient")}}),[a,i]),Object(c.useEffect)((function(){return a.on("addMessageToClient",(function(e){i({type:B.a.ADD_MESSAGE,payload:e}),i({type:B.a.ADD_USER,payload:Object(b.a)(Object(b.a)({},e.user),{},{text:e.text,media:e.media})})})),function(){return a.off("addMessageToClient")}}),[a,i]),Object(c.useEffect)((function(){a.emit("checkUserOnline",t.user)}),[a,t.user]),Object(c.useEffect)((function(){return a.on("checkUserOnlineToMe",(function(e){e.forEach((function(e){s.includes(e.id)||i({type:h.c.ONLINE,payload:e.id})}))})),function(){return a.off("checkUserOnlineToMe")}}),[a,i,s]),Object(c.useEffect)((function(){return a.on("checkUserOnlineToClient",(function(e){s.includes(e)||i({type:h.c.ONLINE,payload:e})})),function(){return a.off("checkUserOnlineToClient")}}),[a,i,s]),Object(c.useEffect)((function(){return a.on("CheckUserOffline",(function(e){i({type:h.c.OFFLINE,payload:e})})),function(){return a.off("CheckUserOffline")}}),[a,i]),Object(c.useEffect)((function(){return a.on("callUserToClient",(function(e){i({type:h.c.CALL,payload:e})})),function(){return a.off("callUserToClient")}}),[a,i]),Object(c.useEffect)((function(){return a.on("userBusy",(function(e){i({type:h.c.ALERT,payload:{error:"".concat(o.username," is busy!")}})})),function(){return a.off("userBusy")}}),[a,i,o]),Object(c.useEffect)((function(){return a.on("new message",(function(e){console.log("socket payload",e),i({type:Y.a.ADD_GROUPMES,payload:Object(b.a)(Object(b.a)({},e.content),{},{conversation:e.content.recipient})})})),function(){return a.off("new message")}}),[a,i]),Object(n.jsx)(n.Fragment,{children:Object(n.jsx)("audio",{controls:!0,ref:u,style:{display:"none"},children:Object(n.jsx)("source",{src:X,type:"audio/mp3"})})})},Z=a.p+"static/media/ringring.278d7816.mp3",J=function(){var e=Object(d.c)((function(e){return e})),t=e.call,a=e.auth,r=e.peer,s=e.socket,o=e.theme,i=Object(d.b)(),u=Object(c.useState)(0),l=Object(C.a)(u,2),j=l[0],p=l[1],f=Object(c.useState)(0),O=Object(C.a)(f,2),m=O[0],x=O[1],v=Object(c.useState)(0),g=Object(C.a)(v,2),y=g[0],N=g[1],w=Object(c.useState)(0),k=Object(C.a)(w,2),_=k[0],S=k[1],T=Object(c.useState)(!1),A=Object(C.a)(T,2),L=A[0],D=A[1],R=Object(c.useRef)(),P=Object(c.useRef)(),I=Object(c.useState)(null),U=Object(C.a)(I,2),G=U[0],F=U[1],M=Object(c.useState)(null),H=Object(C.a)(M,2),Q=H[0],z=H[1];Object(c.useEffect)((function(){return function e(){S((function(e){return e+1})),setTimeout(e,1e3)}(),function(){return S(0)}}),[]),Object(c.useEffect)((function(){N(_%60),x(parseInt(_/60)),p(parseInt(_/3600))}),[_]);var K=Object(c.useCallback)((function(e,t,n){if(e.recipient!==a.user._id||n){var c={sender:e.sender,recipient:e.recipient,text:"",media:[],call:{video:e.video,times:t},createdAt:(new Date).toISOString()};i(Object(B.b)({msg:c,auth:a,socket:s}))}}),[a,i,s]),Y=function(){G&&G.forEach((function(e){return e.stop()})),Q&&Q.close();var e=L?_:0;s.emit("endCall",Object(b.a)(Object(b.a)({},t),{},{times:e})),K(t,e),i({type:h.c.CALL,payload:null})};Object(c.useEffect)((function(){if(!L){var e=setTimeout((function(){s.emit("endCall",Object(b.a)(Object(b.a)({},t),{},{times:0})),K(t,0),i({type:h.c.CALL,payload:null})}),15e3);return function(){return clearTimeout(e)}}S(0)}),[i,L,t,s,K]),Object(c.useEffect)((function(){return s.on("endCallToClient",(function(e){G&&G.forEach((function(e){return e.stop()})),Q&&Q.close(),K(e,e.times),i({type:h.c.CALL,payload:null})})),function(){return s.off("endCallToClient")}}),[s,i,G,K,Q]);var X=function(e){var t={audio:!0,video:e};return navigator.mediaDevices.getUserMedia(t)},V=function(e,t){var a=e;a.srcObject=t,a.play()},J=function(){X(t.video).then((function(e){V(R.current,e);var a=e.getTracks();F(a);var n=r.call(t.peerId,e);n.on("stream",(function(e){V(P.current,e)})),D(!0),z(n)}))};Object(c.useEffect)((function(){return r.on("call",(function(e){X(t.video).then((function(t){R.current&&V(R.current,t);var a=t.getTracks();F(a),e.answer(t),e.on("stream",(function(e){P.current&&V(P.current,e)})),D(!0),z(e)}))})),function(){return r.removeListener("call")}}),[r,t.video]),Object(c.useEffect)((function(){return s.on("callerDisconnect",(function(){G&&G.forEach((function(e){return e.stop()})),Q&&Q.close(),K(t,L?_:0,!0),i({type:h.c.CALL,payload:null}),i({type:h.c.ALERT,payload:{error:"The ".concat(t.username," disconnect")}})})),function(){return s.off("callerDisconnect")}}),[s,G,i,t,K,L,_,Q]);var W=function(e){e.pause(),e.currentTime=0};return Object(c.useEffect)((function(){var e=new Audio(Z);return L?W(e):function(e){e.play()}(e),function(){return W(e)}}),[L]),Object(n.jsxs)("div",{className:"call_modal",children:[Object(n.jsxs)("div",{className:"call_box",style:{display:L&&t.video?"none":"flex"},children:[Object(n.jsxs)("div",{className:"text-center",style:{padding:"40px 0"},children:[Object(n.jsx)(E.a,{src:t.avatar,size:"supper-avatar"}),Object(n.jsx)("h4",{children:t.username}),Object(n.jsx)("h6",{children:t.fullname}),L?Object(n.jsxs)("div",{children:[Object(n.jsx)("span",{children:j.toString().length<2?"0"+j:j}),Object(n.jsx)("span",{children:":"}),Object(n.jsx)("span",{children:m.toString().length<2?"0"+m:m}),Object(n.jsx)("span",{children:":"}),Object(n.jsx)("span",{children:y.toString().length<2?"0"+y:y})]}):Object(n.jsx)("div",{children:t.video?Object(n.jsx)("span",{children:"calling video..."}):Object(n.jsx)("span",{children:"calling audio..."})})]}),!L&&Object(n.jsxs)("div",{className:"timer",children:[Object(n.jsx)("small",{children:m.toString().length<2?"0"+m:m}),Object(n.jsx)("small",{children:":"}),Object(n.jsx)("small",{children:y.toString().length<2?"0"+y:y})]}),Object(n.jsxs)("div",{className:"call_menu",children:[Object(n.jsx)("button",{className:"material-icons text-danger",onClick:Y,children:"call_end"}),t.recipient===a.user._id&&!L&&Object(n.jsx)(n.Fragment,{children:t.video?Object(n.jsx)("button",{className:"material-icons text-success",onClick:J,children:"videocam"}):Object(n.jsx)("button",{className:"material-icons text-success",onClick:J,children:"call"})})]})]}),Object(n.jsxs)("div",{className:"show_video",style:{opacity:L&&t.video?"1":"0",filter:o?"invert(1)":"invert(0)"},children:[Object(n.jsx)("video",{ref:R,className:"you_video",playsInline:!0,muted:!0}),Object(n.jsx)("video",{ref:P,className:"other_video",playsInline:!0}),Object(n.jsxs)("div",{className:"time_video",children:[Object(n.jsx)("span",{children:j.toString().length<2?"0"+j:j}),Object(n.jsx)("span",{children:":"}),Object(n.jsx)("span",{children:m.toString().length<2?"0"+m:m}),Object(n.jsx)("span",{children:":"}),Object(n.jsx)("span",{children:y.toString().length<2?"0"+y:y})]}),Object(n.jsx)("button",{className:"material-icons text-danger end_call",onClick:Y,children:"call_end"})]})]})},W=a(99),q=a.n(W);var $=function(){var e=Object(d.c)((function(e){return e})),t=e.auth,a=e.status,r=e.modal,s=e.call,o=Object(d.b)();return Object(c.useEffect)((function(){o(Object(y.c)());var e=Object(K.a)();return o({type:h.c.SOCKET,payload:e}),function(){return e.close()}}),[o]),Object(c.useEffect)((function(){t.token&&(o(Object(F.e)(t.token)),o(Object(z.b)(t.token)),o(Object(k.d)(t.token)))}),[o,t.token]),Object(c.useEffect)((function(){"Notification"in window?"granted"===Notification.permission||"denied"!==Notification.permission&&Notification.requestPermission().then((function(e){})):alert("This browser does not support desktop notification")}),[]),Object(c.useEffect)((function(){var e=new q.a(void 0,{path:"/",secure:!0});o({type:h.c.PEER,payload:e})}),[o]),Object(n.jsxs)(i.a,{children:[Object(n.jsx)(g,{}),Object(n.jsx)("input",{type:"checkbox",id:"theme"}),Object(n.jsx)("div",{className:"App ".concat((a||r)&&"mode"),children:Object(n.jsxs)("div",{className:"main",children:[t.token&&Object(n.jsx)(U,{}),a&&Object(n.jsx)(Q,{}),t.token&&Object(n.jsx)(V,{}),s&&Object(n.jsx)(J,{}),Object(n.jsx)(u.b,{exact:!0,path:"/",component:t.token?f.default:O.default}),Object(n.jsx)(u.b,{exact:!0,path:"/register",component:m.default}),Object(n.jsx)(p,{exact:!0,path:"/:page",component:j}),Object(n.jsx)(p,{exact:!0,path:"/:page/:id",component:j})]})})]})},ee=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,154)).then((function(t){var a=t.getCLS,n=t.getFID,c=t.getFCP,r=t.getLCP,s=t.getTTFB;a(e),n(e),c(e),r(e),s(e)}))},te=a(46),ae=a(100),ne={},ce=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ne,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case h.c.AUTH:return t.payload;default:return e}},re={},se=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:re,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case h.c.ALERT:return t.payload;default:return e}},oe=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case h.c.THEME:return t.payload;default:return e}},ie=a(22),ue={loading:!1,ids:[],users:[],posts:[]},le=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ue,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ie.a.LOADING:return Object(b.a)(Object(b.a)({},e),{},{loading:t.payload});case ie.a.GET_USER:return Object(b.a)(Object(b.a)({},e),{},{users:[].concat(Object(G.a)(e.users),[t.payload.user])});case ie.a.FOLLOW:case ie.a.UNFOLLOW:return Object(b.a)(Object(b.a)({},e),{},{users:Object(h.b)(e.users,t.payload._id,t.payload)});case ie.a.GET_ID:return Object(b.a)(Object(b.a)({},e),{},{ids:[].concat(Object(G.a)(e.ids),[t.payload])});case ie.a.GET_POSTS:return Object(b.a)(Object(b.a)({},e),{},{posts:[].concat(Object(G.a)(e.posts),[t.payload])});case ie.a.UPDATE_POST:return Object(b.a)(Object(b.a)({},e),{},{posts:Object(h.b)(e.posts,t.payload._id,t.payload)});default:return e}},de=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case h.c.STATUS:return t.payload;default:return e}},je={loading:!1,posts:[],result:0,page:2},be=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:je,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case F.a.CREATE_POST:return Object(b.a)(Object(b.a)({},e),{},{posts:[t.payload].concat(Object(G.a)(e.posts))});case F.a.LOADING_POST:return Object(b.a)(Object(b.a)({},e),{},{loading:t.payload});case F.a.GET_POSTS:return Object(b.a)(Object(b.a)({},e),{},{posts:t.payload.posts,result:t.payload.result,page:t.payload.page});case F.a.UPDATE_POST:return Object(b.a)(Object(b.a)({},e),{},{posts:Object(h.b)(e.posts,t.payload._id,t.payload)});case F.a.DELETE_POST:return Object(b.a)(Object(b.a)({},e),{},{posts:Object(h.a)(e.posts,t.payload._id)});default:return e}},pe=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case h.c.MODAL:return t.payload;default:return e}},fe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case F.a.GET_POST:return[].concat(Object(G.a)(e),[t.payload]);case F.a.UPDATE_POST:return Object(h.b)(e,t.payload._id,t.payload);default:return e}},Oe=a(52),me={loading:!1,posts:[],result:9,page:2,firstLoad:!1},he=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:me,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Oe.a.LOADING:return Object(b.a)(Object(b.a)({},e),{},{loading:t.payload});case Oe.a.GET_POSTS:return Object(b.a)(Object(b.a)({},e),{},{posts:t.payload.posts,result:t.payload.result,firstLoad:!0});case Oe.a.UPDATE_POST:return Object(b.a)(Object(b.a)({},e),{},{posts:t.payload.posts,result:t.payload.result,page:e.page+1});default:return e}},xe={loading:!1,users:[]},ve=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:xe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case z.a.LOADING:return Object(b.a)(Object(b.a)({},e),{},{loading:t.payload});case z.a.GET_USERS:return Object(b.a)(Object(b.a)({},e),{},{users:t.payload.users});default:return e}},ge=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case h.c.SOCKET:return t.payload;default:return e}},ye={loading:!1,data:[],sound:!1},Ee=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ye,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case k.a.GET_NOTIFIES:return Object(b.a)(Object(b.a)({},e),{},{data:t.payload});case k.a.CREATE_NOTIFY:return Object(b.a)(Object(b.a)({},e),{},{data:[t.payload].concat(Object(G.a)(e.data))});case k.a.REMOVE_NOTIFY:return Object(b.a)(Object(b.a)({},e),{},{data:e.data.filter((function(e){return e.id!==t.payload.id||e.url!==t.payload.url}))});case k.a.UPDATE_NOTIFY:return Object(b.a)(Object(b.a)({},e),{},{data:Object(h.b)(e.data,t.payload._id,t.payload)});case k.a.UPDATE_SOUND:return Object(b.a)(Object(b.a)({},e),{},{sound:t.payload});case k.a.DELETE_ALL_NOTIFIES:return Object(b.a)(Object(b.a)({},e),{},{data:t.payload});default:return e}},Ne={users:[],resultUsers:0,data:[],firstLoad:!1},we=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ne,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case B.a.ADD_USER:return e.users.every((function(e){return e._id!==t.payload._id}))?Object(b.a)(Object(b.a)({},e),{},{users:[t.payload].concat(Object(G.a)(e.users))}):e;case B.a.ADD_MESSAGE:return Object(b.a)(Object(b.a)({},e),{},{data:e.data.map((function(e){return e._id===t.payload.recipient||e._id===t.payload.sender?Object(b.a)(Object(b.a)({},e),{},{messages:[].concat(Object(G.a)(e.messages),[t.payload]),result:e.result+1}):e})),users:e.users.map((function(e){return e._id===t.payload.recipient||e._id===t.payload.sender?Object(b.a)(Object(b.a)({},e),{},{text:t.payload.text,media:t.payload.media,call:t.payload.call}):e}))});case B.a.GET_CONVERSATIONS:return Object(b.a)(Object(b.a)({},e),{},{users:t.payload.newArr,resultUsers:t.payload.result,firstLoad:!0});case B.a.GET_MESSAGES:return Object(b.a)(Object(b.a)({},e),{},{data:[].concat(Object(G.a)(e.data),[t.payload])});case B.a.UPDATE_MESSAGES:return Object(b.a)(Object(b.a)({},e),{},{data:Object(h.b)(e.data,t.payload._id,t.payload)});case B.a.DELETE_MESSAGES:return Object(b.a)(Object(b.a)({},e),{},{data:e.data.map((function(e){return e._id===t.payload._id?Object(b.a)(Object(b.a)({},e),{},{messages:t.payload.newData}):e}))});case B.a.DELETE_CONVERSATION:return Object(b.a)(Object(b.a)({},e),{},{users:Object(h.a)(e.users,t.payload),data:Object(h.a)(e.data,t.payload)});case B.a.CHECK_ONLINE_OFFLINE:return Object(b.a)(Object(b.a)({},e),{},{users:e.users.map((function(e){return t.payload.includes(e._id)?Object(b.a)(Object(b.a)({},e),{},{online:!0}):Object(b.a)(Object(b.a)({},e),{},{online:!1})}))});default:return e}},ke={groups:[],resultGroups:0,data:[],firstLoad:!1},_e=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ke,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Y.a.ADD_GROUP:return Object(b.a)(Object(b.a)({},e),{},{groups:[t.payload].concat(Object(G.a)(e.groups))});case Y.a.ADD_GROUPMES:return Object(b.a)(Object(b.a)({},e),{},{data:e.data.map((function(e){return e._id===t.payload.recipient?Object(b.a)(Object(b.a)({},e),{},{groupmessages:[].concat(Object(G.a)(e.groupmessages),[t.payload]),result:e.result+1}):e})),groups:e.groups.map((function(e){return e._id===t.payload.recipient?Object(b.a)(Object(b.a)({},e),{},{text:t.payload.text,media:t.payload.media}):e}))});case Y.a.GET_GROUPS:return Object(b.a)(Object(b.a)({},e),{},{groups:t.payload.newArr,resultGroups:t.payload.result});case Y.a.GET_GROUPMESSAGES:return Object(b.a)(Object(b.a)({},e),{},{data:[].concat(Object(G.a)(e.data),[t.payload])});case Y.a.UPDATE_GROUPMESSAGES:return console.log("action.payload",t.payload),Object(b.a)(Object(b.a)({},e),{},{data:Object(h.b)(e.data,t.payload._id,t.payload)});case Y.a.DELETE_GROUPMESSAGES:return Object(b.a)(Object(b.a)({},e),{},{data:e.data.map((function(e){return e._id===t.payload._id?Object(b.a)(Object(b.a)({},e),{},{groupmessages:t.payload.newData}):e}))});default:return e}},Se=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case h.c.ONLINE:return[].concat(Object(G.a)(e),[t.payload]);case h.c.OFFLINE:return e.filter((function(e){return e!==t.payload}));default:return e}},Te=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case h.c.CALL:return t.payload;default:return e}},Ae=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case h.c.PEER:return t.payload;default:return e}},Le=Object(te.combineReducers)({auth:ce,alert:se,theme:oe,profile:le,status:de,homePosts:be,modal:pe,detailPost:fe,discover:he,suggestions:ve,socket:ge,notify:Ee,message:we,groupmessage:_e,online:Se,call:Te,peer:Ae}),Ce=a(101),De=Object(te.createStore)(Le,Object(Ce.composeWithDevTools)(Object(te.applyMiddleware)(ae.a))),Re=function(e){var t=e.children;return Object(n.jsx)(d.a,{store:De,children:t})};o.a.render(Object(n.jsx)(r.a.StrictMode,{children:Object(n.jsx)(Re,{children:Object(n.jsx)($,{})})}),document.getElementById("root")),ee()}],[[140,1,2]]]);
//# sourceMappingURL=main.a0edd4f0.chunk.js.map